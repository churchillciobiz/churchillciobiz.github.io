<!DOCTYPE html>
<!-- saved from url=(0087)https://www.sitepoint.com/a-step-by-step-guide-to-building-an-android-audio-player-app/ -->
<html lang="en" data-react-helmet="lang"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Gatsby 2.20.25"><title>A Step by Step Guide to Building an Android Audio Player App — SitePoint</title><link data-react-helmet="true" rel="preload" href="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/css" as="style"><link data-react-helmet="true" rel="stylesheet" href="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/css" type="text/css"><link data-react-helmet="true" rel="preload" href="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/all.css" as="style"><link data-react-helmet="true" rel="stylesheet" href="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/all.css"><link data-react-helmet="true" href="https://dab1nmslvvntp.cloudfront.net/"><link data-react-helmet="true" href="https://d2sis3lil8ndrq.cloudfront.net/"><link data-react-helmet="true" href="https://bid.g.doubleclick.net/"><meta data-react-helmet="true" name="description" content="Valdio Veliu presents an in-depth and step by step guide to building your very own Android audio player app."><meta data-react-helmet="true" property="og:title" content="A Step by Step Guide to Building an Android Audio Player App — SitePoint"><meta data-react-helmet="true" property="og:description" content="Valdio Veliu presents an in-depth and step by step guide to building your very own Android audio player app."><meta data-react-helmet="true" property="og:type" content="website"><meta data-react-helmet="true" property="og:image" content="https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2016/08/1471529082Screenshot_2016-08-12-19-31-48.png"><meta data-react-helmet="true" property="twitter:account_id" content="15743570"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="twitter:image" content="https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2016/08/1471529082Screenshot_2016-08-12-19-31-48.png"><meta data-react-helmet="true" name="twitter:title" content="A Step by Step Guide to Building an Android Audio Player App — SitePoint"><meta data-react-helmet="true" name="twitter:description" content="Valdio Veliu presents an in-depth and step by step guide to building your very own Android audio player app."><script src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/1991563104285178" async=""></script><script async="" src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/fbevents.js.download"></script><script type="text/javascript" async="" src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/insight.min.js.download"></script><script type="text/javascript" async="" src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/uwt.js.download"></script><script type="text/javascript" async="" src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/hotjar-1088957.js.download"></script><script type="text/javascript" async="" src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/f.txt"></script><script type="text/javascript" async="" src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/analytics.js.download"></script><script type="text/javascript" async="" src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/js"></script><script type="text/javascript" async="" src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/analytics.js.download"></script><script src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/cmp.js.download" async="" type="text/javascript"></script><script async="" src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/gtm.js.download"></script><script src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/cmp.js.download" async="" type="text/javascript"></script><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"Article","headline":"A Step by Step Guide to Building an Android Audio Player App — SitePoint","url":"https://www.sitepoint.com/a-step-by-step-guide-to-building-an-android-audio-player-app/","articleSection":"Mobile","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.sitepoint.com/a-step-by-step-guide-to-building-an-android-audio-player-app/"},"author":[{"@type":"Person","name":"Valdio Veliu"}],"publisher":{"@type":"Organization","name":"SitePoint","logo":{"@type":"ImageObject","url":"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2019/12/1576634464sitepoint-app-icon-512.png"}},"dateCreated":"2016-08-19T08:00:28","datePublished":"2016-08-19T08:00:28","dateModified":"2016-08-19 23:52:41","thumbnailUrl":"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2016/08/1471529082Screenshot_2016-08-12-19-31-48.png","image":{"@type":"ImageObject","url":"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2016/08/1471529082Screenshot_2016-08-12-19-31-48.png"},"keywords":"audio,audio player,chrisw,media,streaming"}</script><script>window.dataLayer = window.dataLayer || [];window.dataLayer.push({"platform":"gatsby"}); (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl+'';f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer', 'GTM-KL8PMMW');</script><link rel="icon" href="https://www.sitepoint.com/icons/icon-48x48.png?v=5ffb031539806d560ce4a4510a588e7d"><link rel="manifest" href="https://www.sitepoint.com/manifest.webmanifest"><meta name="theme-color" content="#3a3a3a"><link rel="apple-touch-icon" sizes="48x48" href="https://www.sitepoint.com/icons/icon-48x48.png?v=5ffb031539806d560ce4a4510a588e7d"><link rel="apple-touch-icon" sizes="72x72" href="https://www.sitepoint.com/icons/icon-72x72.png?v=5ffb031539806d560ce4a4510a588e7d"><link rel="apple-touch-icon" sizes="96x96" href="https://www.sitepoint.com/icons/icon-96x96.png?v=5ffb031539806d560ce4a4510a588e7d"><link rel="apple-touch-icon" sizes="144x144" href="https://www.sitepoint.com/icons/icon-144x144.png?v=5ffb031539806d560ce4a4510a588e7d"><link rel="apple-touch-icon" sizes="192x192" href="https://www.sitepoint.com/icons/icon-192x192.png?v=5ffb031539806d560ce4a4510a588e7d"><link rel="apple-touch-icon" sizes="256x256" href="https://www.sitepoint.com/icons/icon-256x256.png?v=5ffb031539806d560ce4a4510a588e7d"><link rel="apple-touch-icon" sizes="384x384" href="https://www.sitepoint.com/icons/icon-384x384.png?v=5ffb031539806d560ce4a4510a588e7d"><link rel="apple-touch-icon" sizes="512x512" href="https://www.sitepoint.com/icons/icon-512x512.png?v=5ffb031539806d560ce4a4510a588e7d"><link rel="sitemap" type="application/xml" href="https://www.sitepoint.com/sitemap.xml"><style data-styled="active" data-styled-version="5.1.0"></style><link rel="alternate" type="application/rss+xml" title="SitePoint" href="https://www.sitepoint.com/sitepoint.rss"><link as="script" rel="preload" href="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/8f19945a102b8694b192e02096543c0a480101b8-abf24d0007a932337a17.js.download"><link as="script" rel="preload" href="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/framework-d58e6aa01b2ba4423f5b.js.download"><link as="script" rel="preload" href="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/component---src-templates-post-post-js-36e464cb45c169b3f388.js.download"><link as="script" rel="preload" href="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/app-0b9c3c8ef2bd2c65c6eb.js.download"><link as="script" rel="preload" href="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/666dde8597d1f9d1c775385416e6ca4aab230ec4-1602ff8fa0f142f4d718.js.download"><link as="script" rel="preload" href="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/926d4057eb4c11cdffc33bc58165cdfb9b6052e9-977a1d273ec5c42121c4.js.download"><link as="script" rel="preload" href="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/40c9d3da7812ce629f011ab775263392319f5a6e-1ce2ebbc10fa9a7f2b8f.js.download"><link as="script" rel="preload" href="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/webpack-runtime-a2710040043a31b6bf8c.js.download"><link as="fetch" rel="preload" href="https://www.sitepoint.com/page-data/a-step-by-step-guide-to-building-an-android-audio-player-app/page-data.json" crossorigin="anonymous"><link as="fetch" rel="preload" href="https://www.sitepoint.com/page-data/app-data.json" crossorigin="anonymous"><style type="text/css">.backpack.dropzone {
  font-family: 'SF UI Display', 'Segoe UI';
  font-size: 15px;
  text-align: center;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 250px;
  height: 150px;
  font-weight: lighter;
  color: white;
  will-change: right;
  z-index: 2147483647;
  bottom: 20%;
  background: #333;
  position: fixed;
  user-select: none;
  transition: left .5s, right .5s;
  right: 0px; }
  .backpack.dropzone .animation {
    height: 80px;
    width: 250px;
    background: url("chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/assets/backpack/dropzone/hoverstate.png") left center; }
  .backpack.dropzone .title::before {
    content: 'Save to'; }
  .backpack.dropzone.closed {
    right: -250px; }
  .backpack.dropzone.hover .animation {
    animation: sxt-play-anim-hover 0.91s steps(21);
    animation-fill-mode: forwards;
    background: url("chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/assets/backpack/dropzone/hoverstate.png") left center; }

@keyframes sxt-play-anim-hover {
  from {
    background-position: 0px; }
  to {
    background-position: -5250px; } }
  .backpack.dropzone.saving .title::before {
    content: 'Saving to'; }
  .backpack.dropzone.saving .animation {
    background: url("chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/assets/backpack/dropzone/saving_loop.png") left center;
    animation: sxt-play-anim-saving steps(59) 2.46s infinite; }

@keyframes sxt-play-anim-saving {
  100% {
    background-position: -14750px; } }
  .backpack.dropzone.saved .title::before {
    content: 'Saved to'; }
  .backpack.dropzone.saved .animation {
    background: url("chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/assets/backpack/dropzone/saved.png") left center;
    animation: sxt-play-anim-saved steps(20) 0.83s forwards; }

@keyframes sxt-play-anim-saved {
  100% {
    background-position: -5000px; } }
</style><link rel="canonical" key="https://www.sitepoint.com/a-step-by-step-guide-to-building-an-android-audio-player-app/" href="https://www.sitepoint.com/a-step-by-step-guide-to-building-an-android-audio-player-app/" data-react-helmet="true"><script src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/ads.js.download" defer="true" data-react-helmet="true"></script><script type="text/javascript" async="true" data-react-helmet="true">var elem = document.createElement('script');
elem.src = 'https://quantcast.mgr.consensu.org/cmp.js';
elem.async = true;
elem.type = "text/javascript";
var scpt = document.getElementsByTagName('script')[0];
scpt.parentNode.insertBefore(elem, scpt);
(function() {
var gdprAppliesGlobally = true;
function addFrame() {
  if (!window.frames['__cmpLocator']) {
  if (document.body) {
    var body = document.body,
    iframe = document.createElement('iframe');
    iframe.style.cssText = "display:none";
    iframe.name = '__cmpLocator';
    body.appendChild(iframe);
  } else {
    // In the case where this stub is located in the head,
    // this allows us to inject the iframe more quickly than
    // relying on DOMContentLoaded or other events.
    setTimeout(addFrame, 5);
  }
  }
}
addFrame();
function cmpMsgHandler(event) {
  var msgIsString = typeof event.data === "string";
  var json;
  if(msgIsString) {
  json = event.data.indexOf("__cmpCall") != -1 ? JSON.parse(event.data) : {};
  } else {
  json = event.data;
  }
  if (json.__cmpCall) {
  var i = json.__cmpCall;
  window.__cmp(i.command, i.parameter, function(retValue, success) {
    var returnMsg = {"__cmpReturn": {
    "returnValue": retValue,
    "success": success,
    "callId": i.callId
    }};
    event.source.postMessage(msgIsString ?
    JSON.stringify(returnMsg) : returnMsg, '*');
  });
  }
}
window.__cmp = function (c) {
  var b = arguments;
  if (!b.length) {
  return __cmp.a;
  }
  else if (b[0] === 'ping') {
  b[2]({"gdprAppliesGlobally": gdprAppliesGlobally,
    "cmpLoaded": false}, true);
  } else if (c == '__cmp')
  return false;
  else {
  if (typeof __cmp.a === 'undefined') {
    __cmp.a = [];
  }
  __cmp.a.push([].slice.apply(b));
  }
}
window.__cmp.gdprAppliesGlobally = gdprAppliesGlobally;
window.__cmp.msgHandler = cmpMsgHandler;
if (window.addEventListener) {
  window.addEventListener('message', cmpMsgHandler, false);
}
else {
  window.attachEvent('onmessage', cmpMsgHandler);
}
})();
window.__cmp('init', {
  'Language': 'en',
  'Initial Screen Reject Button Text': 'I do not accept',
  'Initial Screen Accept Button Text': 'I accept',
  'Purpose Screen Body Text': 'You can set your consent preferences and determine how you want your data to be used based on the purposes below. You may set your preferences for us independently from those of third-party partners. Each purpose has a description so that you know how we and partners use your data.',
  'Vendor Screen Body Text': 'You can set consent preferences for each individual third-party company below. Expand each company list item to see what purposes they use data for to help make your choices. In some cases, companies may disclose that they use your data without asking for your consent, based on their legitimate interests. You can click on their privacy policies for more information and to opt out.',
  'Vendor Screen Accept All Button Text': 'Accept all',
  'Vendor Screen Reject All Button Text': 'Reject all',
  'Initial Screen Body Text': "We use cookies to provide you the best possible experience of SitePoint. Want to know more? Read our Terms of Service and privacy policy. Have questions? Please contact support@sitepoint.com, we're happy to help!",
  'Publisher Name': 'Sitepoint',
  'Display UI': 'inEU',
  'Publisher Purpose IDs': [1,2,4,5],
  'UI Layout': 'banner',
  'Non-Consent Display Frequency': 15,
  'Consent Scope': 'global',
  'Display Persistent Consent Link': true,
  'Off On Label': 'Off',
  'Custom Links Displayed on Initial Screen': [ "[Terms of Services](https://www.sitepoint.com/legals/)", "[Privacy Policy](https://www.sitepoint.com/privacy-policy/)"],
});</script><script src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/f(1).txt"></script><script async="" src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/modules.a3d983311a7a43f86303.js.download" charset="utf-8"></script><style type="text/css">iframe#_hjRemoteVarsFrame {display: none !important; width: 1px !important; height: 1px !important; opacity: 0 !important; pointer-events: none !important;}</style></head><body data-gr-c-s-loaded="true"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KL8PMMW" height="0" width="0" style="display: none; visibility: hidden"></iframe></noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header class="styledHeader__StyledHeader-vt4ff6-10 kXIvJf"><a id="skip-navigation" href="https://www.sitepoint.com/a-step-by-step-guide-to-building-an-android-audio-player-app/#main-content" class="styledHeader__SkipNavigation-vt4ff6-0 bVclpN">Skip to main content</a><div class="styledHeader__TopBanner-vt4ff6-12 icJIfc"><div type="remote" class="styledPromoteBox__StyledPromoteBox-sc-1lx5aae-0 fXstSD" id="top_remote_y3uowb1588024125668"><div><a href="https://www.sitepoint.com/jobs/buddyboss/front-end-developer"><div class="styledRemote-yht4rr-0 ioGYGN"><div class="styledRemote__LogoContainer-yht4rr-1 hMNVWU"><img src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/buddyboss.png" alt="BuddyBoss Logo"></div><div class="styledRemote__DetailsContainer-yht4rr-2 kVjRnG"><h5 class="styledRemote__Title-yht4rr-3 dqQSqe">Front End Developer</h5><ul class="styledRemote__Properties-yht4rr-4 eMKvEm"><li class="styledRemote__Company-yht4rr-5 iTFYpf"><label href="#" class="small">BuddyBoss</label></li><li class="styledRemote__PostDate-yht4rr-7 fqjRvK"><label href="#" class="small">7 days ago</label></li></ul></div><ul class="styledRemote__TagsContainer-yht4rr-9 cMYrHy"><li class="styledRemote__Tag-yht4rr-10 kXsEXy"><label>Html5</label></li><li class="styledRemote__Tag-yht4rr-10 kXsEXy"><label>Css3</label></li><li class="styledRemote__Tag-yht4rr-10 kXsEXy"><label>Wordpress</label></li><li class="styledRemote__Tag-yht4rr-10 kXsEXy"><label>Php</label></li><li class="styledRemote__Tag-yht4rr-10 kXsEXy"><label>Rest</label></li><li class="styledRemote__Tag-yht4rr-10 kXsEXy"><label>Git</label></li></ul></div></a></div></div></div><nav aria-label="Menu bar" class="styledHeader__NavigationBar-vt4ff6-3 eNFJfX"><div class="styledHeader__Container-vt4ff6-11 RzLru"><a aria-label="SitePoint" class="styledHeader__LogoLink-vt4ff6-1 oGXMj" href="https://www.sitepoint.com/"><svg viewBox="0 0 123 27" role="img" focusable="false"><title>SitePoint</title><g fill-rule="evenodd"><path d="M31.36,16.75 C31.56,17.07 31.82,17.31 32.14,17.50 C32.46,17.68 32.82,17.82 33.23,17.89 C33.63,17.97 34.05,18.01 34.48,18.01 C34.81,18.01 35.16,17.99 35.52,17.94 C35.89,17.89 36.22,17.81 36.53,17.68 C36.83,17.55 37.08,17.36 37.28,17.11 C37.48,16.87 37.58,16.55 37.58,16.17 C37.58,15.64 37.37,15.24 36.96,14.97 C36.55,14.69 36.03,14.47 35.41,14.31 C34.79,14.14 34.12,13.99 33.39,13.85 C32.66,13.71 31.99,13.52 31.37,13.27 C30.75,13.03 30.23,12.68 29.82,12.23 C29.41,11.78 29.20,11.16 29.20,10.36 C29.20,9.73 29.34,9.20 29.63,8.75 C29.92,8.30 30.30,7.94 30.75,7.66 C31.20,7.38 31.72,7.17 32.29,7.03 C32.86,6.90 33.42,6.83 33.99,6.83 C34.71,6.83 35.38,6.89 35.99,7.01 C36.61,7.13 37.15,7.34 37.62,7.63 C38.09,7.93 38.46,8.33 38.75,8.83 C39.03,9.34 39.19,9.96 39.24,10.72 L37.13,10.72 C37.10,10.32 36.99,9.98 36.81,9.72 C36.63,9.46 36.40,9.25 36.12,9.08 C35.84,8.92 35.53,8.81 35.19,8.74 C34.85,8.66 34.51,8.63 34.16,8.63 C33.84,8.63 33.53,8.65 33.20,8.70 C32.88,8.75 32.59,8.83 32.32,8.95 C32.06,9.07 31.84,9.23 31.68,9.43 C31.51,9.63 31.43,9.89 31.43,10.21 C31.43,10.56 31.56,10.86 31.82,11.09 C32.07,11.32 32.40,11.51 32.80,11.66 C33.19,11.82 33.64,11.95 34.13,12.05 C34.63,12.15 35.13,12.26 35.62,12.37 C36.15,12.49 36.67,12.62 37.17,12.78 C37.67,12.94 38.12,13.15 38.51,13.42 C38.90,13.68 39.21,14.01 39.45,14.41 C39.69,14.81 39.81,15.31 39.81,15.90 C39.81,16.66 39.65,17.28 39.33,17.77 C39.01,18.27 38.58,18.67 38.06,18.98 C37.54,19.28 36.96,19.49 36.30,19.61 C35.65,19.73 35.00,19.79 34.36,19.79 C33.65,19.79 32.97,19.72 32.32,19.58 C31.68,19.43 31.11,19.20 30.61,18.87 C30.12,18.54 29.72,18.11 29.42,17.57 C29.13,17.03 28.96,16.38 28.93,15.61 L31.03,15.61 C31.05,16.06 31.16,16.44 31.36,16.75" id="Fill-1"></path><path d="M42.27,7.12 L44.37,7.12 L44.37,19.53 L42.27,19.53 L42.27,7.12 Z" id="Fill-2"></path><path d="M53.13,7.12 L53.13,8.92 L50.57,8.92 L50.57,16.62 C50.57,16.86 50.59,17.05 50.63,17.20 C50.67,17.34 50.75,17.46 50.87,17.54 C50.99,17.62 51.15,17.67 51.35,17.69 C51.56,17.71 51.83,17.73 52.16,17.73 L53.13,17.73 L53.13,19.53 L51.51,19.53 C50.97,19.53 50.50,19.49 50.11,19.42 C49.72,19.35 49.41,19.22 49.17,19.02 C48.93,18.83 48.75,18.56 48.64,18.21 C48.52,17.86 48.46,17.39 48.46,16.81 L48.46,8.92 L46.28,8.92 L46.28,7.12 L48.46,7.12 L48.46,3.39 L50.57,3.39 L50.57,7.12 L53.13,7.12" id="Fill-3"></path><path d="M64.53,18.73 C63.57,19.44 62.36,19.79 60.91,19.79 C59.89,19.79 59.00,19.63 58.25,19.31 C57.49,18.99 56.86,18.54 56.35,17.97 C55.84,17.39 55.45,16.70 55.20,15.90 C54.94,15.10 54.80,14.23 54.76,13.29 C54.76,12.34 54.91,11.48 55.21,10.69 C55.51,9.91 55.92,9.23 56.46,8.65 C57.00,8.08 57.63,7.63 58.37,7.31 C59.11,6.99 59.91,6.83 60.79,6.83 C61.93,6.83 62.87,7.05 63.63,7.51 C64.38,7.97 64.98,8.55 65.44,9.25 C65.89,9.96 66.20,10.73 66.38,11.56 C66.55,12.39 66.62,13.18 66.59,13.93 L56.99,13.93 C56.98,14.48 57.04,14.99 57.19,15.48 C57.34,15.97 57.58,16.40 57.91,16.78 C58.24,17.16 58.66,17.46 59.18,17.68 C59.69,17.90 60.29,18.01 60.98,18.01 C61.88,18.01 62.61,17.82 63.18,17.41 C63.75,17.02 64.13,16.41 64.31,15.59 L66.39,15.59 C66.11,16.98 65.49,18.03 64.53,18.73 L64.53,18.73 Z M64.02,10.76 C63.83,10.33 63.58,9.96 63.25,9.65 C62.93,9.34 62.55,9.09 62.11,8.90 C61.68,8.72 61.19,8.63 60.66,8.63 C60.12,8.63 59.62,8.72 59.19,8.90 C58.75,9.09 58.37,9.34 58.06,9.66 C57.75,9.98 57.50,10.35 57.32,10.78 C57.13,11.20 57.03,11.65 56.99,12.13 L64.36,12.13 C64.32,11.65 64.21,11.20 64.02,10.76 L64.02,10.76 Z" id="Fill-4"></path><path d="M70.95,7.12 L70.95,8.80 L71.00,8.80 C71.35,8.11 71.89,7.61 72.64,7.30 C73.38,6.98 74.20,6.83 75.09,6.83 C76.09,6.83 76.95,7.00 77.68,7.36 C78.42,7.71 79.03,8.18 79.52,8.78 C80.01,9.38 80.37,10.08 80.62,10.86 C80.87,11.65 80.99,12.48 80.99,13.36 C80.99,14.24 80.87,15.07 80.63,15.85 C80.39,16.64 80.03,17.32 79.54,17.91 C79.06,18.49 78.44,18.95 77.71,19.29 C76.97,19.62 76.12,19.79 75.14,19.79 C74.83,19.79 74.48,19.76 74.09,19.70 C73.70,19.63 73.32,19.53 72.94,19.38 C72.56,19.24 72.20,19.04 71.86,18.79 C71.52,18.55 71.23,18.24 71.00,17.87 L70.95,17.87 L70.95,24.26 L68.84,24.26 L68.84,7.12 L70.95,7.12 L70.95,7.12 Z M78.53,11.52 C78.37,10.97 78.13,10.48 77.81,10.04 C77.49,9.61 77.07,9.27 76.57,9.01 C76.06,8.76 75.47,8.63 74.79,8.63 C74.08,8.63 73.48,8.76 72.98,9.04 C72.49,9.31 72.08,9.67 71.77,10.10 C71.46,10.55 71.23,11.05 71.09,11.60 C70.95,12.17 70.88,12.73 70.88,13.31 C70.88,13.92 70.95,14.51 71.10,15.07 C71.25,15.64 71.48,16.14 71.81,16.57 C72.13,17.01 72.55,17.35 73.06,17.62 C73.57,17.88 74.19,18.01 74.92,18.01 C75.65,18.01 76.25,17.88 76.74,17.61 C77.23,17.34 77.62,16.98 77.92,16.53 C78.22,16.08 78.43,15.57 78.56,14.99 C78.70,14.41 78.76,13.82 78.76,13.21 C78.76,12.64 78.68,12.07 78.53,11.52 L78.53,11.52 Z" id="Fill-5"></path><path d="M83.17,10.78 C83.44,9.98 83.84,9.30 84.36,8.71 C84.89,8.13 85.55,7.67 86.33,7.33 C87.10,7.00 87.99,6.83 89.00,6.83 C90.03,6.83 90.92,7.00 91.69,7.33 C92.46,7.67 93.11,8.13 93.64,8.71 C94.17,9.30 94.56,9.98 94.83,10.78 C95.09,11.57 95.23,12.42 95.23,13.33 C95.23,14.25 95.09,15.09 94.83,15.88 C94.56,16.66 94.17,17.35 93.64,17.93 C93.11,18.52 92.46,18.97 91.69,19.30 C90.92,19.63 90.03,19.79 89.00,19.79 C87.99,19.79 87.10,19.63 86.33,19.30 C85.55,18.97 84.89,18.52 84.36,17.93 C83.84,17.35 83.44,16.66 83.17,15.88 C82.91,15.09 82.78,14.25 82.78,13.33 C82.78,12.42 82.91,11.57 83.17,10.78 L83.17,10.78 Z M85.32,15.34 C85.53,15.92 85.81,16.41 86.18,16.80 C86.54,17.19 86.96,17.49 87.45,17.70 C87.94,17.91 88.46,18.01 89.00,18.01 C89.55,18.01 90.06,17.91 90.55,17.70 C91.04,17.49 91.46,17.19 91.83,16.80 C92.19,16.41 92.48,15.92 92.68,15.34 C92.89,14.75 92.99,14.09 92.99,13.33 C92.99,12.58 92.89,11.91 92.68,11.33 C92.48,10.75 92.19,10.25 91.83,9.85 C91.46,9.45 91.04,9.15 90.55,8.94 C90.06,8.73 89.55,8.63 89.00,8.63 C88.46,8.63 87.94,8.73 87.45,8.94 C86.96,9.15 86.54,9.45 86.18,9.85 C85.81,10.25 85.53,10.75 85.32,11.33 C85.11,11.91 85.01,12.58 85.01,13.33 C85.01,14.09 85.11,14.75 85.32,15.34 L85.32,15.34 Z" id="Fill-6"></path><path d="M97.83,7.12 L99.94,7.12 L99.94,19.53 L97.83,19.53 L97.83,7.12 Z" id="Fill-7"></path><path d="M105.19,7.12 L105.19,9.08 L105.24,9.08 C106.12,7.58 107.51,6.83 109.41,6.83 C110.25,6.83 110.95,6.94 111.51,7.16 C112.08,7.39 112.53,7.70 112.88,8.10 C113.23,8.50 113.47,8.98 113.61,9.53 C113.75,10.08 113.82,10.69 113.82,11.36 L113.82,19.53 L111.71,19.53 L111.71,11.12 C111.71,10.36 111.48,9.75 111.02,9.30 C110.56,8.85 109.92,8.63 109.11,8.63 C108.46,8.63 107.91,8.72 107.43,8.92 C106.96,9.11 106.57,9.38 106.26,9.73 C105.94,10.08 105.71,10.50 105.55,10.97 C105.39,11.44 105.32,11.96 105.32,12.52 L105.32,19.53 L103.21,19.53 L103.21,7.12 L105.19,7.12" id="Fill-8"></path><path d="M122.47,7.12 L122.47,8.92 L119.92,8.92 L119.92,16.62 C119.92,16.86 119.94,17.05 119.98,17.20 C120.02,17.34 120.10,17.46 120.22,17.54 C120.33,17.62 120.49,17.67 120.70,17.69 C120.91,17.71 121.18,17.73 121.50,17.73 L122.47,17.73 L122.47,19.53 L120.86,19.53 C120.32,19.53 119.85,19.49 119.46,19.42 C119.07,19.35 118.76,19.22 118.52,19.02 C118.28,18.83 118.10,18.56 117.99,18.21 C117.87,17.86 117.81,17.39 117.81,16.81 L117.81,8.92 L115.63,8.92 L115.63,7.12 L117.81,7.12 L117.81,3.39 L119.92,3.39 L119.92,7.12 L122.47,7.12" id="Fill-9"></path><path d="M0.67,11.87 L2.62,13.76 L8.76,19.50 L11.41,16.94 C11.65,16.61 11.64,16.16 11.36,15.84 L8.94,13.72 L8.95,13.72 L6.34,11.19 C6.04,10.84 6.04,10.32 6.37,9.99 L13.38,3.21 L10.20,0.12 L0.68,9.31 C-0.05,10.02 -0.05,11.17 0.67,11.87" id="Fill-10"></path><path d="M21.60,15.15 L19.66,13.27 L13.51,7.53 L10.86,10.08 C10.62,10.42 10.64,10.87 10.91,11.19 L13.33,13.31 L13.33,13.31 L15.93,15.84 C16.24,16.19 16.23,16.70 15.91,17.04 L8.89,23.82 L12.08,26.91 L19.65,19.60 L21.60,17.71 C22.33,17.01 22.33,15.86 21.60,15.15" id="Fill-11"></path><path d="M44.55,4.58 C44.55,5.24 44.00,5.77 43.32,5.77 C42.64,5.77 42.09,5.24 42.09,4.58 C42.09,3.93 42.64,3.39 43.32,3.39 C44.00,3.39 44.55,3.93 44.55,4.58" id="Fill-12"></path><path d="M100.11,4.58 C100.11,5.24 99.56,5.77 98.88,5.77 C98.20,5.77 97.65,5.24 97.65,4.58 C97.65,3.93 98.20,3.39 98.88,3.39 C99.56,3.39 100.11,3.93 100.11,4.58" id="Fill-13"></path></g></svg></a><button type="button" data-toggle="main-nav" aria-label="Toggle navigation" aria-controls="main-nav" class="styledHeader__Hamburger-vt4ff6-9 bWwBOK"><span></span></button><ul id="main-nav" class="styledHeader__NavList-vt4ff6-4 kbsvjX"><li class="styledHeader__NavListItem-vt4ff6-5 jpQa-DU"><a data-text="Blog" class="styledHeader__NavLink-vt4ff6-6 kSaGil" href="https://www.sitepoint.com/blog/">Blog</a></li><li class="styledHeader__NavListItem-vt4ff6-5 jpQa-DU"><a data-text="Community" href="https://www.sitepoint.com/community/" class="styledHeader__NavLink-vt4ff6-6 kSaGil">Community</a></li><li class="styledHeader__NavListItem-vt4ff6-5 jpQa-DU"><a data-text="Jobs" href="https://www.sitepoint.com/jobs/" class="styledHeader__NavLink-vt4ff6-6 kSaGil">Jobs</a></li><li class="styledHeader__NavListItem-vt4ff6-5 jpQa-DU"><a data-text="Library" href="https://www.sitepoint.com/premium/library/" class="styledHeader__NavLink-vt4ff6-6 kSaGil">Library</a></li><li class="styledHeader__NavListItem-vt4ff6-5 jpQa-DU"><a data-text="Login" href="https://www.sitepoint.com/premium/sign-in/" class="styledHeader__NavLink-vt4ff6-6 kSaGil">Login</a></li></ul><a id="join-premium" href="https://www.sitepoint.com/premium/products/Z2lkOi8vbGVhcm5hYmxlL1Byb2R1Y3QvMzA3?ref_source=sitepoint&amp;ref_medium=topnav" target="_blank" color="pink" type="default" class="button__Button-tmcfcj-0 styledHeader__JoinPremium-vt4ff6-2 dukERU">Join Premium</a></div></nav></header><main id="main-content" class="layout__Wrapper-ii2kc2-0 gnSOWC"><div><article aria-label="Article title: A Step by Step Guide to Building an Android Audio Player App" class="cG9zdDoxMzczMjE="><section aria-label="Article header for A Step by Step Guide to Building an Android Audio Player App" color="mobile" class="styledHeader__StyledHeader-sc-1ei2vfl-0 humGsZ"><div class="styledHeader__Wrapper-sc-1ei2vfl-1 cHUmue"><header class="styledHeader__Info-sc-1ei2vfl-2 LTMfA"><h1 class="styledHeader__Title-sc-1ei2vfl-4 jNIbMf">A Step by Step Guide to Building an Android Audio Player App</h1><div class="styledHeader__Metabox-sc-1ei2vfl-3 ciGkhP"><div><p class="styledHeader__Meta-sc-1ei2vfl-5 dvfXdt">By&nbsp;<a href="https://www.sitepoint.com/author/valdioveliu">Valdio Veliu</a></p><p class="styledHeader__Meta-sc-1ei2vfl-5 dvfXdt">Mobile</p><time datetime="2016-08-19" class="styledHeader__Meta-sc-1ei2vfl-5 dvfXdt">August 19, 2016</time></div><div><p class="styledHeader__Meta-sc-1ei2vfl-5 dvfXdt">Share:</p><button aria-label="Share Sitepoint on facebook" data-network="facebook" class="styledSocialShare__StyledButton-sc-1slciz-0 bTeKVi"><div class="fab fa-facebook-square"></div></button><button aria-label="Share Sitepoint on reddit" data-network="reddit" class="styledSocialShare__StyledButton-sc-1slciz-0 bTeKVi"><div class="fab fa-reddit"></div></button><button aria-label="Share Sitepoint on twitter" data-network="twitter" class="styledSocialShare__StyledButton-sc-1slciz-0 bTeKVi"><div class="fab fa-twitter-square"></div></button><button aria-label="Share Sitepoint on email" data-network="email" class="styledSocialShare__StyledButton-sc-1slciz-0 bTeKVi"><div class="fa fa-envelope"></div></button></div></div></header><div type="book" class="styledPromoteBox__StyledPromoteBox-sc-1lx5aae-0 WbpJY" id="header_book_8q6d5j1588024125668"><div><div class="styledBook__StyledBook-sc-1f7vk4f-0 LcvTZ"><div><div class="styledBook__BookCoverContainer-sc-1f7vk4f-1 cjRZIh"><figure type="spine" class="styledBookCover__StyledBookCover-beflyc-0 hNYtzW"><div class="styledBookCover__Spine-beflyc-1 ePRdzX"><img src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/4c7f6303-60e8-45dc-a95b-aae08a4f32a3.png" class="styledBookCover__Img-beflyc-2 hjHque"></div></figure></div><div class="styledBook__PContainer-sc-1f7vk4f-2 hgthhm"><p font-weight="400" class="p__P-j9v9zk-0 gDhSTQ">😳 Ever felt a little embarassed sharing your JavaScript? Let's fix it.</p></div></div><div class="styledBook__CTAContainer-sc-1f7vk4f-3 gBefjl"><a id="book-s9ze41588024298160" href="https://www.sitepoint.com/premium/books/javascript-best-practice" color="blue" type="outline" class="button__Button-tmcfcj-0 ivaYFQ">Code proud! ;)</a></div></div></div></div></div></section><div class="styledPost__StyledPost-sc-4qaqpu-0 letBtp"><section aria-label="Article content for A Step by Step Guide to Building an Android Audio Player App" class="styledBody__StyledBody-kvy0sj-0 enxCuw">
<p>This tutorial is a step by step guide to building an Android Audio app, using the best and most efficient methodologies and APIs. This is a long tutorials, so I have split it into two discrete parts if it’s too much to digest in one read:</p>
<ol><li>Building a media player in a service, important for playing media in the background.</li>
<li>Interacting with the service through <code>BroadcastReceiver</code>s ( PLAY, PAUSE, NEXT, PREVIOUS). How to handle edge use-cases like incoming calls, change of audio outputs (e.g. removing headphones).</li>
</ol><h2 id="partonesettinguptheproject">Part One – Setting up the Project.</h2>
<p>Create a new Project in Android Studio and add the following permissions in the <em>AndroidManifest.xml</em> file.</p>
<pre tabindex="0" class="  language-xml"><code class="xml  language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.permission.INTERNET<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.permission.MEDIA_CONTENT_CONTROL<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.permission.READ_PHONE_STATE<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre>

<p>The app needs these permissions to access media files over the internet when streaming media. Since the focus of this article is building a media player app, you need the <code>MEDIA_CONTENT_CONTROL</code> to control media playback. You use the <code>READ_PHONE_STATE</code> permission to access phone state to listen to events like incoming calls so you can stop the audio while a call is in progress.</p>
<h2 id="steptwocreatethemediaplayerservice">Step Two – Create the MediaPlayer Service</h2>
<p>The core of the Audio Player app is the media player service. The following class is an example of this service. The class has multiple <code>MediaPlayer</code> implementations to handle events that can happen while playing audio. The last implementation, from <code>AudioManager.OnAudioFocusChangeListener</code> is necessary to handle requests for <code>AudioFocus</code> from other apps that want to play media files.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">public class MediaPlayerService extends Service implements MediaPlayer.OnCompletionListener,
      MediaPlayer.OnPreparedListener, MediaPlayer.OnErrorListener, MediaPlayer.OnSeekCompleteListener,
      MediaPlayer.OnInfoListener, MediaPlayer.OnBufferingUpdateListener,

      AudioManager.OnAudioFocusChangeListener {


  // Binder given to clients
  private final IBinder iBinder = new LocalBinder();

  @Override
  public IBinder onBind(Intent intent) {
      return iBinder;
  }

  @Override
  public void onBufferingUpdate(MediaPlayer mp, int percent) {
      //Invoked indicating buffering status of
      //a media resource being streamed over the network.
  }

  @Override
  public void onCompletion(MediaPlayer mp) {
      //Invoked when playback of a media source has completed.
  }

  //Handle errors
  @Override
  public boolean onError(MediaPlayer mp, int what, int extra) {
      //Invoked when there has been an error during an asynchronous operation.
      return false;
  }

  @Override
  public boolean onInfo(MediaPlayer mp, int what, int extra) {
      //Invoked to communicate some info.
      return false;
  }

  @Override
  public void onPrepared(MediaPlayer mp) {
      //Invoked when the media source is ready for playback.
  }

  @Override
  public void onSeekComplete(MediaPlayer mp) {
      //Invoked indicating the completion of a seek operation.
  }

  @Override
  public void onAudioFocusChange(int focusChange) {
      //Invoked when the audio focus of the system is updated.
  }

  public class LocalBinder extends Binder {
      public MediaPlayerService getService() {
          return MediaPlayerService.this;
      }
  }

}
</code></pre>
<p>The code above is a template of all the methods that will handle the <code>MediaPlayer</code> events. The only code that is complete is the binding of the <code>Service</code>. You need to bind this service because it interacts with the activity to get the audio files. You can lean more about bound services in the <a href="https://developer.android.com/guide/components/bound-services.html">documentation</a>.</p>
<p>Declare the <code>Service</code> in the <em>AndroidManifest.xml</em> file</p>
<pre tabindex="0" class="  language-xml"><code class="xml  language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>application</span>
  <span class="token attr-name">&lt;service</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>.MediaPlayerService<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>application</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<h2 id="stepthreeconstructingthemediaplayer">Step Three – Constructing the MediaPlayer</h2>
<p>The Android multimedia framework supports a variety of common media types. One key component of this framework is the <a href="https://developer.android.com/reference/android/media/MediaPlayer.html">MediaPlayer</a> class, which with minimal setup you can use to play audio and video. You can find a basic example of the <code>MediaPlayer</code> implementation in the <a href="https://developer.android.com/guide/topics/media/mediaplayer.html#mediaplayer">documentation</a>, but you will need more than this example <code>Service</code> to play media. Next I will describe the necessary methods that need to be setup in the <code>MediaPlayerService</code> class.</p>
<p>Create the following global instances of <code>MediaPlayer</code> and the <code>String</code> path of the audio in the <code>Service</code> class.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">private MediaPlayer mediaPlayer;
//path to the audio file
private String mediaFile;
</code></pre>
<p>Now initialize the <code>mediaPlayer</code>:</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">private void initMediaPlayer() {
    mediaPlayer = new MediaPlayer();
    //Set up MediaPlayer event listeners
    mediaPlayer.setOnCompletionListener(this);
    mediaPlayer.setOnErrorListener(this);
    mediaPlayer.setOnPreparedListener(this);
    mediaPlayer.setOnBufferingUpdateListener(this);
    mediaPlayer.setOnSeekCompleteListener(this);
    mediaPlayer.setOnInfoListener(this);
    //Reset so that the MediaPlayer is not pointing to another data source
    mediaPlayer.reset();

    mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
    try {
        // Set the data source to the mediaFile location
        mediaPlayer.setDataSource(mediaFile);
    } catch (IOException e) {
        e.printStackTrace();
        stopSelf();
    }
    mediaPlayer.prepareAsync();
}
</code></pre>
<p>When working with media, you need to implement some functions to handle basic action for playing media. These basic functions are Play, Stop, Pause, and Resume.</p>
<p>First add another global variable to store the pause/resume position.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">//Used to pause/resume MediaPlayer
private int resumePosition;
</code></pre>
<p>Add <code>if</code> statements to make sure there are no problems while playing media.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">private void playMedia() {
    if (!mediaPlayer.isPlaying()) {
        mediaPlayer.start();
    }
}

private void stopMedia() {
    if (mediaPlayer == null) return;
    if (mediaPlayer.isPlaying()) {
        mediaPlayer.stop();
    }
}

private void pauseMedia() {
    if (mediaPlayer.isPlaying()) {
        mediaPlayer.pause();
        resumePosition = mediaPlayer.getCurrentPosition();
    }
}

private void resumeMedia() {
    if (!mediaPlayer.isPlaying()) {
        mediaPlayer.seekTo(resumePosition);
        mediaPlayer.start();
    }
}
</code></pre>
<p>Now that you have created the initialization functions it’s time to implement the <code>@Override</code> methods constructed in the initial <code>Service</code> template. These methods are important to the <code>MediaPlayer</code> because all the key actions the player will perform will be called from these methods. Replace the original methods in the <code>Service</code> template with the following.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">@Override
public void onCompletion(MediaPlayer mp) {
    //Invoked when playback of a media source has completed.
    stopMedia();
    //stop the service
    stopSelf();
}

//Handle errors
@Override
public boolean onError(MediaPlayer mp, int what, int extra) {
    //Invoked when there has been an error during an asynchronous operation
    switch (what) {
        case MediaPlayer.MEDIA_ERROR_NOT_VALID_FOR_PROGRESSIVE_PLAYBACK:
            Log.d("MediaPlayer Error", "MEDIA ERROR NOT VALID FOR PROGRESSIVE PLAYBACK " + extra);
            break;
        case MediaPlayer.MEDIA_ERROR_SERVER_DIED:
            Log.d("MediaPlayer Error", "MEDIA ERROR SERVER DIED " + extra);
            break;
        case MediaPlayer.MEDIA_ERROR_UNKNOWN:
            Log.d("MediaPlayer Error", "MEDIA ERROR UNKNOWN " + extra);
            break;
    }
    return false;
}

@Override
public void onPrepared(MediaPlayer mp) {
    //Invoked when the media source is ready for playback.
    playMedia();
}
</code></pre>
<p><strong>Note</strong>: There are more <code>@Override</code> methods implemented in the initial <code>Service</code> template. These are useful in specific <code>MediaPlayer</code> events, but since the focus of this tutorial is building a general purpose media player I wont implement them.</p><div class="proper-ad-unit">
          <div id="proper-ad-sitepoint_content_1">
            <script>
              window.propertag.cmd.push(function() {
                proper_display('sitepoint_content_1');
              });
            </script></div>
        </div><p></p>
<h2 id="stepfourhandlingaudiofocus">Step Four – Handling Audio Focus</h2>
<p>For a good user experience with audio in Android, you need to be careful that your app plays nicely with the system and other apps that also play media.</p>
<p>To ensure this good user experience the <code>MediaPlayerService</code> will have to handle <code>AudioFocus</code> events and these are handled in the last override method, <code>onAudioFocusChange()</code>. This method is a <code>switch</code> statement with the focus events as its <code>case:</code>s. Keep in mind that this override method is called after a request for <code>AudioFocus</code> has been made from the system or another media app.</p>
<p>What happens in each <code>case:</code>?</p>
<ul><li><code>AudioManager.AUDIOFOCUS_GAIN</code> – The service gained audio focus, so it needs to start playing.</li>
<li><code>AudioManager.AUDIOFOCUS_LOSS</code> – The service lost audio focus, the user probably moved to playing media on another app, so release the media player.</li>
<li><code>AudioManager.AUDIOFOCUS_LOSS_TRANSIENT</code> – Fucos lost for a short time, pause the <code>MediaPlayer</code>.</li>
<li><code>AudioManager.AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK</code> – Lost focus for a short time, probably a notification arrived on the device, lower the playback volume.</li>
</ul><p>In addition to the override methods, you need two other functions to request and release audio focus from the <code>MediaPlayer</code>. The following code block contains all the audio focus methods described above. I took the <code>onAudioFocusChange()</code>‘s code from the Android Developer <a href="https://developer.android.com/guide/topics/media/mediaplayer.html#audiofocus">documentation</a> and made some changes, but this code gets the job done for this example.</p>
<div class="inline-roller"><div class="styledRollerDoor__StyledRollerDoor-sc-16spu5e-1 jpqESm" style="height: 290px;"><div class="styledRollerDoor__Content-sc-16spu5e-0 fznjz"><div type="book_form" class="styledPromoteBox__StyledPromoteBox-sc-1lx5aae-0 gOWFaY" id="rollerdoor_book_1dl3kt1588024126238"><div><div class="styledBookForm__StyledBookForm-sc-12b2f31-0 gWwHuS"><div class="styledBookForm__BookCoverContainer-sc-12b2f31-1 wmNXB"><figure type="default" class="styledBookCover__StyledBookCover-beflyc-0 dRQRgl"><img src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/34dcc72f-800f-4332-ab0c-31f0c4c4aad7.png" class="styledBookCover__Img-beflyc-2 hjHque"></figure></div><div class="styledBookForm__FormContainer-sc-12b2f31-2 kyRVuf"><p font-weight="300" class="p__P-j9v9zk-0 cKeNIC">🤷 If <a href="https://w3techs.com/technologies/details/cm-wordpress">35% of ALL websites </a> are WordPress, is PHP really that dead?</p><p font-weight="400" class="p__P-j9v9zk-0 gDhSTQ">Get 'PHP &amp; MySQL: Novice to Ninja, 6th Edition' for free.</p><div class="styledBookForm__CTAContainer-sc-12b2f31-3 cCyJhi"><a href="https://www.sitepoint.com/premium/books/php-mysql-novice-to-ninja-6th-edition" color="blue" type="outline" class="button__Button-tmcfcj-0 ivaYFQ">Find out more</a></div></div></div></div></div></div></div></div><p>First add a new global variable to the <code>Service</code> class.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">private AudioManager audioManager;
</code></pre>
<p>Replace the <code>Service</code>‘s <code>onAudioFocusChange()</code> method with the following and add the functions it uses.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">@Override
public void onAudioFocusChange(int focusState) {
    //Invoked when the audio focus of the system is updated.
    switch (focusState) {
        case AudioManager.AUDIOFOCUS_GAIN:
            // resume playback
            if (mediaPlayer == null) initMediaPlayer();
            else if (!mediaPlayer.isPlaying()) mediaPlayer.start();
            mediaPlayer.setVolume(1.0f, 1.0f);
            break;
        case AudioManager.AUDIOFOCUS_LOSS:
            // Lost focus for an unbounded amount of time: stop playback and release media player
            if (mediaPlayer.isPlaying()) mediaPlayer.stop();
            mediaPlayer.release();
            mediaPlayer = null;
            break;
        case AudioManager.AUDIOFOCUS_LOSS_TRANSIENT:
            // Lost focus for a short time, but we have to stop
            // playback. We don't release the media player because playback
            // is likely to resume
            if (mediaPlayer.isPlaying()) mediaPlayer.pause();
            break;
        case AudioManager.AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK:
            // Lost focus for a short time, but it's ok to keep playing
            // at an attenuated level
            if (mediaPlayer.isPlaying()) mediaPlayer.setVolume(0.1f, 0.1f);
            break;
    }
}

private boolean requestAudioFocus() {
    audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
    int result = audioManager.requestAudioFocus(this, AudioManager.STREAM_MUSIC, AudioManager.AUDIOFOCUS_GAIN);
    if (result == AudioManager.AUDIOFOCUS_REQUEST_GRANTED) {
        //Focus gained
        return true;
    }
    //Could not gain focus
    return false;
}

private boolean removeAudioFocus() {
    return AudioManager.AUDIOFOCUS_REQUEST_GRANTED ==
            audioManager.abandonAudioFocus(this);
}
</code></pre>
<p>If you want to learn more about audio focus then <a href="https://www.sitepoint.com/managing-multiple-sound-sources-in-android-with-audio-focus/">SitePoint article</a> has a great tutorial.</p>
<h2 id="stepfiveservicelifecyclemethods">Step Five – Service Lifecycle Methods</h2>
<p>In this section I will focus on the <code>Service</code> lifecycle. These methods are crucial to the <code>MediaPlayer</code> because the <code>Service</code> lifecycle is closely connected to the <code>MediaPlayer</code>s. These methods will handle the initialization and resource management for the <code>MediaPlayer</code>.</p>
<p>I have inline comments to make it easier to understand.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">//The system calls this method when an activity, requests the service be started
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    try {
        //An audio file is passed to the service through putExtra();
        mediaFile = intent.getExtras().getString("media");
    } catch (NullPointerException e) {
        stopSelf();
    }

    //Request audio focus
    if (requestAudioFocus() == false) {
        //Could not gain focus
        stopSelf();
    }

    if (mediaFile != null &amp;&amp; mediaFile != "")
        initMediaPlayer();

    return super.onStartCommand(intent, flags, startId);
}
</code></pre>
<p>The <code>onStartCommand()</code> handles the initialization of the <code>MediaPlayer</code> and the focus request to make sure there are no other apps playing media. In the <code>onStartCommand()</code> code I added an extra <code>try-catch</code> block to make sure the <code>getExtras()</code> method doesn’t throw a <code>NullPointerException</code>.</p>
<p>Another important method you need to implement is <code>onDestroy()</code>. In this method the <code>MediaPlayer</code> resources must be released, as this service is about to be destroyed and there is no need for the app to control the media resources.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">@Override
public void onDestroy() {
    super.onDestroy();
    if (mediaPlayer != null) {
        stopMedia();
        mediaPlayer.release();
    }
    removeAudioFocus();
}
</code></pre>
<p>The <code>onDestroy()</code> method also releases audio focus, this is more of a personal choice. If you release the focus in this method the <code>MediaPlayerService</code> will have audio focus until destroyed, if there are no interruptions from other media apps for audio focus.</p>
<p>If you want a more dynamic focus control, you can request audio focus when new media starts playing and release it in the <code>onCompletion()</code> method, so the service will have focus control only while playing something.</p><div class="proper-ad-unit">
          <div id="proper-ad-sitepoint_content_2">
            <script>
              window.propertag.cmd.push(function() {
                proper_display('sitepoint_content_2');
              });
            </script></div>
        </div><p></p>
<h2 id="stepsixbindingtheaudioplayer">Step Six – Binding the Audio Player</h2>
<p>In this section I will cover the final steps to bind the <code>MediaPlayerService</code> class to the <code>MainActivity</code> and provide it with audio to play. You must bind the <code>Service</code> to the <code>Activity</code> so they can interact with each other.</p>
<p>Add the following global variables to the <code>MainActivity</code> class.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">private MediaPlayerService player;
boolean serviceBound = false;
</code></pre>
<p>The first is an instance of the <code>Service</code> and the second Boolean value contains the status of the <code>Service</code>, bound or not to the activity.</p>
<p>To handle <code>Service</code> binding, add the following to the <code>MainActivity</code> class.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">//Binding this Client to the AudioPlayer Service
private ServiceConnection serviceConnection = new ServiceConnection() {
    @Override
    public void onServiceConnected(ComponentName name, IBinder service) {
        // We've bound to LocalService, cast the IBinder and get LocalService instance
        MediaPlayerService.LocalBinder binder = (MediaPlayerService.LocalBinder) service;
        player = binder.getService();
        serviceBound = true;

        Toast.makeText(MainActivity.this, "Service Bound", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onServiceDisconnected(ComponentName name) {
        serviceBound = false;
    }
};
</code></pre>
<p>Now it’s time to play some audio. The following function creates a new instance of the <code>MediaPlayerService</code> and sends a media file to play, so add it to the <code>MainActivity</code>.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">private void playAudio(String media) {
    //Check is service is active
    if (!serviceBound) {
        Intent playerIntent = new Intent(this, MediaPlayerService.class);
        playerIntent.putExtra("media", media);
        startService(playerIntent);
        bindService(playerIntent, serviceConnection, Context.BIND_AUTO_CREATE);
    } else {
        //Service is active
        //Send media with BroadcastReceiver
    }
}
</code></pre>
<p>The <code>playAudio()</code> function is not complete. I will return to this later when sending media files to the <code>Service</code> with a <code>BroadcastReceiver</code>.</p>
<p>Call the <code>playAudio()</code> function from the <code>Activity</code>s <code>onCreate()</code> method and reference an audio file.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">playAudio("https://upload.wikimedia.org/wikipedia/commons/6/6c/Grieg_Lyric_Pieces_Kobold.ogg");
</code></pre>
<h2 id="stepsevenactivitylifecyclemethods">Step Seven – Activity Lifecycle Methods</h2>
<p>In this section I will cover basic, but crucial implementations of the <code>MainActivity</code>s life-cycle methods. If you call the <code>playAudio()</code> function from the <code>Activity</code>s <code>onCreate()</code> method the <code>Service</code> will start playing, but the app can easily crash.</p>
<p>Add the following methods to <code>MainActivity</code> to fix it. All these methods do is save and restore the state of the <code>serviceBound</code> variable and unbind the <code>Service</code> when a user closes the app.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
    savedInstanceState.putBoolean("ServiceState", serviceBound);
    super.onSaveInstanceState(savedInstanceState);
}

@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
    serviceBound = savedInstanceState.getBoolean("ServiceState");
}

@Override
protected void onDestroy() {
    super.onDestroy();
    if (serviceBound) {
        unbindService(serviceConnection);
        //service is active
        player.stopSelf();
    }
}
</code></pre>
<h2 id="extrasloadinglocalaudiofiles">Extras – Loading Local Audio Files</h2>
<p>A user will likely want to load audio from the actual device instead of streaming them online. You can load audio files from the device by using <code>ContentResolver</code>.</p>
<p>Create a new Java class used as an audio object. The following class contains the crucial information an audio file needs, but you can add more if necessary.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">public class Audio implements Serializable {

    private String data;
    private String title;
    private String album;
    private String artist;

    public Audio(String data, String title, String album, String artist) {
        this.data = data;
        this.title = title;
        this.album = album;
        this.artist = artist;
    }

    public String getData() {
        return data;
    }

    public void setData(String data) {
        this.data = data;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getAlbum() {
        return album;
    }

    public void setAlbum(String album) {
        this.album = album;
    }

    public String getArtist() {
        return artist;
    }

    public void setArtist(String artist) {
        this.artist = artist;
    }
}
</code></pre>
<p>Add the permission to <em>AndroidManifest.xml</em>.</p>
<pre tabindex="0" class="  language-xml"><code class="xml  language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.permission.READ_EXTERNAL_STORAGE<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre>
<p>This is necessary to load local media files from the Android device.</p><div class="proper-ad-unit">
          <div id="proper-ad-sitepoint_content_3">
            <script>
              window.propertag.cmd.push(function() {
                proper_display('sitepoint_content_3');
              });
            </script></div>
        </div><p></p>
<p>In the <code>MainActivity</code> class create a global <code>ArrayList</code> of <code>Audio</code> objects.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">ArrayList&lt;Audio&gt; audioList;
</code></pre>
<p>To get data from the device add the following function to <code>MainActivity</code>. It retrieves the data from the device in ascending order.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">private void loadAudio() {
  ContentResolver contentResolver = getContentResolver();

  Uri uri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
  String selection = MediaStore.Audio.Media.IS_MUSIC + "!= 0";
  String sortOrder = MediaStore.Audio.Media.TITLE + " ASC";
  Cursor cursor = contentResolver.query(uri, null, selection, null, sortOrder);

  if (cursor != null &amp;&amp; cursor.getCount() &gt; 0) {
      audioList = new ArrayList&lt;&gt;();
      while (cursor.moveToNext()) {
          String data = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.DATA));
          String title = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.TITLE));
          String album = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.ALBUM));
          String artist = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.ARTIST));

          // Save to audioList
          audioList.add(new Audio(data, title, album, artist));
      }
  }
  cursor.close();
}
</code></pre>
<p>After retrieving data from the device the <code>playAudio()</code> function can play it on the <code>Service</code>.</p>
<p>In <code>MainActivity</code>‘s <code>onCreate()</code> method add the following code. Be sure to have at least one audio track the service can play or the app will crash.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">loadAudio();
//play the first audio in the ArrayList
playAudio(audioList.get(0).getData());
</code></pre>
<p><strong>If you’re ready for more, then keep reading, or this is also a good opportunity to take a quick break before continuing</strong>.</p>
<p>Next I will focus on user interaction with the <code>MediaPlayerService</code> and handling interruptions that occur while playing media like incoming calls, change of audio outputs and other functionality needed to build a complete Audio Player app.</p>
<p>The key component for interacting with background services is <a href="https://developer.android.com/reference/android/content/BroadcastReceiver.html"><code>BroadcastReceiver</code></a>.</p>
<h2 id="whatisabroadcastreceiver">What is a <code>BroadcastReceiver</code>?</h2>
<p>Android system components and apps make system wide calls through intents with the help of <code>sendBroadcast()</code>, <code>sendStickyBroadcast()</code> or <code>sendOrderedBroadcast()</code> methods to notify interested applications. Broadcast intents can be useful for providing a messaging and event system between application components or used by the Android system to notify interested applications about key system events. Registered <code>BroadcastReceiver</code>s intercept these events broadcast to the whole Android system. The <code>BroadcastReceiver</code>s purpose is to wait for certain events to happen and to react to these events, but a <code>BroadcastReceiver</code> does not react to all the incoming events, only specific events. When a <code>BroadcastReceiver</code> detects a matching intent it will call its <code>onReceive()</code> method to handle it.</p>
<p>You can register a <code>BroadcastReceiver</code> in two ways, statically in <em>AndroidManifest.xml</em> or dynamically by using the <code>registerReceiver()</code> method at runtime.</p>
<p>For this tutorial, the <code>BroadcastReceiver</code>s are dynamically created since it’s important that the <code>MediaPlayerService</code> listens for events only when the player is active. It’s not a good user experience if the app starts playing audio unexpectedly after an event was triggered. If you register a receiver, you must unregister it when it’s no longer needed.</p>
<h2 id="letsgetbacktotheaudioplayerapp">Lets Get Back to the Audio Player App</h2>
<p>For a more complete audio app I added a <code>RecyclerView</code>, and with the help of the <code>loadAudio()</code> function, loaded local audio files to the <code>RecyclerView</code>. I also made changes to the color scheme and layout. I wont go into detail describing the process of adding the <code>RecyclerView</code> to the app, but you can see the end result on <a href="https://github.com/sitepoint-editors/AudioPlayer">GitHub</a>.</p>
<p>If you want to learn more about <code>RecyclerView</code>, then read my <a href="https://www.sitepoint.com/mastering-complex-lists-with-the-android-recyclerview/">article</a>.</p>
<p>Another change is the <code>playAudio()</code> function and the <code>Service</code>s <code>onStartCommand()</code> method, but I will return to these changes later and focus on the <code>BroadcastReceiver</code>s events and user interaction with the <code>Service</code>.</p><div class="proper-ad-unit">
          <div id="proper-ad-sitepoint_content_4">
            <script>
              window.propertag.cmd.push(function() {
                proper_display('sitepoint_content_4');
              });
            </script></div>
        </div><p></p>
<h2 id="changeofaudiooutputsheadphoneremoved">Change of audio outputs (headphone removed)</h2>
<p>In media apps it’s common that when a user removes their headphones from the jack the media stops playing.</p>
<p>In the <code>MediaPlayerService</code> class create a <code>BroadcastReceiver</code> that listens to <code>ACTION_AUDIO_BECOMING_NOISY</code>, which means that the audio is about to become ‘noisy’ due to a change in audio outputs. Add the following functions in the service class.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">//Becoming noisy
private BroadcastReceiver becomingNoisyReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        //pause audio on ACTION_AUDIO_BECOMING_NOISY
        pauseMedia();
        buildNotification(PlaybackStatus.PAUSED);
    }
};

private void registerBecomingNoisyReceiver() {
    //register after getting audio focus
    IntentFilter intentFilter = new IntentFilter(AudioManager.ACTION_AUDIO_BECOMING_NOISY);
    registerReceiver(becomingNoisyReceiver, intentFilter);
}
</code></pre>
<p>The <code>BroadcastReceiver</code> instance will pause the <code>MediaPlayer</code> when the system makes an <code>ACTION_AUDIO_BECOMING_NOISY</code> call. To make the <code>BroadcastReceiver</code> available you must register it. The <code>registerBecomingNoisyReceiver()</code> function handles this and specifies the intent action <code>BECOMING_NOISY</code> which will trigger this <code>BroadcastReceiver</code>.</p>
<p>You have not yet implemented the <code>buildNotification()</code>, so don’t worry when it shows an error.</p>
<h2 id="handlingincomingcalls">Handling Incoming Calls</h2>
<p>The next functions avoid audio playing during calls, which would be a terrible user experience.</p>
<p>First create the following global variables in the <code>MediaPlayerService</code> class.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">//Handle incoming phone calls
private boolean ongoingCall = false;
private PhoneStateListener phoneStateListener;
private TelephonyManager telephonyManager;
</code></pre>
<p>Add the following function.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">//Handle incoming phone calls
private void callStateListener() {
  // Get the telephony manager
  telephonyManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
  //Starting listening for PhoneState changes
  phoneStateListener = new PhoneStateListener() {
      @Override
      public void onCallStateChanged(int state, String incomingNumber) {
          switch (state) {
              //if at least one call exists or the phone is ringing
              //pause the MediaPlayer
              case TelephonyManager.CALL_STATE_OFFHOOK:
              case TelephonyManager.CALL_STATE_RINGING:
                  if (mediaPlayer != null) {
                      pauseMedia();
                      ongoingCall = true;
                  }
                  break;
              case TelephonyManager.CALL_STATE_IDLE:
                  // Phone idle. Start playing.
                  if (mediaPlayer != null) {
                      if (ongoingCall) {
                          ongoingCall = false;
                          resumeMedia();
                      }
                  }
                  break;
          }
      }
  };
  // Register the listener with the telephony manager
  // Listen for changes to the device call state.
  telephonyManager.listen(phoneStateListener,
          PhoneStateListener.LISTEN_CALL_STATE);
}
</code></pre>
<p>The <code>callStateListener()</code> function is an implementation of the <code>PhoneStateListener</code> that listens to <code>TelephonyManager</code>s state changes. <code>TelephonyManager</code> provides access to information about the telephony services on the device and listens for changes to the device call state and reacts to these changes.</p>
<h2 id="redefinemethods">Redefine Methods</h2>
<p>I mentioned that I changed the methods described earlier in this article. I also made changes to the way audio files are passed to the <code>Service</code>. The audio files are loaded from the device with the help of the <code>loadAudio()</code> function. When the user wants to play audio, call the <code>playAudio(int audioIndex)</code> function with an index of the wanted audio from the <code>ArrayList</code> of loaded audio files.</p>
<p>When calling the <code>playAudio()</code> function for the first time, the <code>ArrayList</code> is stored in <code>SharedPreferences</code> together with the audio index number and when the <code>MediaPlayerService</code> wants to play new audio it loads it from <code>SharedPreferences</code>. This is one way to load the <code>Audio</code> array to the <code>Service</code>, but there are others.</p>
<p>Open <em>build.gradle (app)</em> and add dependencies for the <a href="https://github.com/google/gson">Gson</a> library.</p>
<pre tabindex="0" class="  language-gradle"><code class="gradle  language-gradle">dependencies {
  ...
  compile group: 'com.google.code.gson', name: 'gson', version: '2.7', changing: true
}
</code></pre>
<p>The following class handles Data storage.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">public class StorageUtil {

    private final String STORAGE = " com.valdioveliu.valdio.audioplayer.STORAGE";
    private SharedPreferences preferences;
    private Context context;

    public StorageUtil(Context context) {
        this.context = context;
    }

    public void storeAudio(ArrayList&lt;Audio&gt; arrayList) {
        preferences = context.getSharedPreferences(STORAGE, Context.MODE_PRIVATE);

        SharedPreferences.Editor editor = preferences.edit();
        Gson gson = new Gson();
        String json = gson.toJson(arrayList);
        editor.putString("audioArrayList", json);
        editor.apply();
    }

    public ArrayList&lt;Audio&gt; loadAudio() {
        preferences = context.getSharedPreferences(STORAGE, Context.MODE_PRIVATE);
        Gson gson = new Gson();
        String json = preferences.getString("audioArrayList", null);
        Type type = new TypeToken&lt;ArrayList&lt;Audio&gt;&gt;() {
        }.getType();
        return gson.fromJson(json, type);
    }

    public void storeAudioIndex(int index) {
        preferences = context.getSharedPreferences(STORAGE, Context.MODE_PRIVATE);
        SharedPreferences.Editor editor = preferences.edit();
        editor.putInt("audioIndex", index);
        editor.apply();
    }

    public int loadAudioIndex() {
        preferences = context.getSharedPreferences(STORAGE, Context.MODE_PRIVATE);
        return preferences.getInt("audioIndex", -1);//return -1 if no data found
    }

    public void clearCachedAudioPlaylist() {
        preferences = context.getSharedPreferences(STORAGE, Context.MODE_PRIVATE);
        SharedPreferences.Editor editor = preferences.edit();
        editor.clear();
        editor.commit();
    }
}
</code></pre>
<p>Now it’s time to change the <code>playAudio()</code> function. First in the <code>MainActivity</code> class create a global static <code>String</code>.</p><div class="proper-ad-unit">
          <div id="proper-ad-sitepoint_content_5">
            <script>
              window.propertag.cmd.push(function() {
                proper_display('sitepoint_content_5');
              });
            </script></div>
        </div><p></p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">public static final String Broadcast_PLAY_NEW_AUDIO = "com.valdioveliu.valdio.audioplayer.PlayNewAudio";
// Change to your package name
</code></pre>
<p>This string sends broadcast intents to the <code>MediaPlayerService</code> that the user wants to play new audio and has updated the cached index of the audio they want to play. The <code>BroadcastReceiver</code> that handles this intent is not created yet, for now replace your old <code>playAudio()</code> function in the <code>MainActivity</code> with the following.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">private void playAudio(int audioIndex) {
    //Check is service is active
    if (!serviceBound) {
        //Store Serializable audioList to SharedPreferences
        StorageUtil storage = new StorageUtil(getApplicationContext());
        storage.storeAudio(audioList);
        storage.storeAudioIndex(audioIndex);

        Intent playerIntent = new Intent(this, MediaPlayerService.class);
        startService(playerIntent);
        bindService(playerIntent, serviceConnection, Context.BIND_AUTO_CREATE);
    } else {
        //Store the new audioIndex to SharedPreferences
        StorageUtil storage = new StorageUtil(getApplicationContext());
        storage.storeAudioIndex(audioIndex);

        //Service is active
        //Send a broadcast to the service -&gt; PLAY_NEW_AUDIO
        Intent broadcastIntent = new Intent(Broadcast_PLAY_NEW_AUDIO);
        sendBroadcast(broadcastIntent);
    }
}
</code></pre>
<p>The audio is not passed to the <code>Service</code> through <code>putExtra()</code>, so the <code>Service</code> has to load the data from the <code>SharedPreferences</code> and this is why the <code>onStartCommand()</code> method needs to be rewritten. I will return to this method at the end of this tutorial to give the complete <code>onStartCommand()</code> implementation. For now, add the following global variables to the <code>MediaPlayerService</code> class.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">//List of available Audio files
private ArrayList&lt;Audio&gt; audioList;
private int audioIndex = -1;
private Audio activeAudio; //an object of the currently playing audio
</code></pre>
<h2 id="playnewaudiobroadcast">Play New Audio Broadcast</h2>
<p>When the <code>MediaPlayerService</code> is playing something and the user wants to play a new track, you must notify the service that it needs to move to new audio. You need a way for the <code>Service</code> to listen to these “play new Audio” calls and act on them. How? Another <code>BroadcastReceiver</code>. I mentioned these “play new Audio” calls in the <em>Redefine methods</em> section when calling the <code>playAudio()</code> function.</p>
<p>In the <code>MediaPlayerService</code> class add the following functions.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">private BroadcastReceiver playNewAudio = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {

        //Get the new media index form SharedPreferences
        audioIndex = new StorageUtil(getApplicationContext()).loadAudioIndex();
        if (audioIndex != -1 &amp;&amp; audioIndex &lt; audioList.size()) {
            //index is in a valid range
            activeAudio = audioList.get(audioIndex);
        } else {
            stopSelf();
        }

        //A PLAY_NEW_AUDIO action received
        //reset mediaPlayer to play the new Audio
        stopMedia();
        mediaPlayer.reset();
        initMediaPlayer();
        updateMetaData();
        buildNotification(PlaybackStatus.PLAYING);
    }
};

private void register_playNewAudio() {
    //Register playNewMedia receiver
    IntentFilter filter = new IntentFilter(MainActivity.Broadcast_PLAY_NEW_AUDIO);
    registerReceiver(playNewAudio, filter);
}
</code></pre>
<p>When intercepting a <code>PLAY_NEW_AUDIO</code> intent, this <code>BroadcastReceiver</code> loads the updated index and updates the <code>activeAudio</code> object to the new media and the <code>MediaPlayer</code> is reset to play the new audio. The <code>buildNotification()</code> function is not yet implemented so it shows an error.</p>
<h2 id="registerbroadcastreceivers">Register <code>BroadcastReceiver</code>S</h2>
<p>In the <code>Service</code>s <code>onCreate()</code> method add the registration calls for the <code>BroadcastReceiver</code>s.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">@Override
public void onCreate() {
    super.onCreate();
    // Perform one-time setup procedures

    // Manage incoming phone calls during playback.
    // Pause MediaPlayer on incoming call,
    // Resume on hangup.
    callStateListener();
    //ACTION_AUDIO_BECOMING_NOISY -- change in audio outputs -- BroadcastReceiver
    registerBecomingNoisyReceiver();
    //Listen for new Audio to play -- BroadcastReceiver
    register_playNewAudio();
}
</code></pre>
<p>You must unregister all the registered <code>BroadcastReceiver</code>s when they are not needed anymore. This happens in the <code>Service</code>s <code>onDestroy()</code> method. Replace your current <code>onDestroy()</code> method with the following. Again, don’t worry about the <code>removeNotification()</code>, it’s implemented later.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">@Override
public void onDestroy() {
    super.onDestroy();
    if (mediaPlayer != null) {
        stopMedia();
        mediaPlayer.release();
    }
    removeAudioFocus();
    //Disable the PhoneStateListener
    if (phoneStateListener != null) {
        telephonyManager.listen(phoneStateListener, PhoneStateListener.LISTEN_NONE);
    }

    removeNotification();

    //unregister BroadcastReceivers
    unregisterReceiver(becomingNoisyReceiver);
    unregisterReceiver(playNewAudio);

    //clear cached playlist
    new StorageUtil(getApplicationContext()).clearCachedAudioPlaylist();
}
</code></pre>
<p>When the <code>Service</code> is destroyed it must stop listening to incoming calls and release the <code>TelephonyManager</code> resources. Another final thing the <code>Service</code> handles before it’s destroyed is clearing the data stored in the <code>SharedPreferences</code>.</p>
<h2 id="userinteractions">User Interactions</h2>
<p>Interacting with the <code>MediaPlayerService</code> is one of the key features of an audio player app, because users don’t need to play media, but also need to have control over the app. This is not as easy as it looks when working with background services because there is no user interface in background threads. Android Lollipop introduced new features, including Android <a href="https://developer.android.com/reference/android/app/Notification.MediaStyle.html">MediaStyle notifications</a>.</p>
<p><code>Notification.MediaStyle</code> allows you to add media buttons without having to create custom notifications. In this example I will use the <code>MediaStyle</code>s support library, <a href="https://developer.android.com/reference/android/support/v7/app/NotificationCompat.MediaStyle.html"><code>NotificationCompat.MediaStyle</code></a> to support older Android versions.</p>
<p>To have full control over media playback in the <code>MediaPlayerService</code> you need to create an instance of <code>MediaSession</code>. <code>MediaSession</code> allows interaction with media controllers, volume keys, media buttons, and transport controls. An app creates an instance of <code>MediaSession</code> when it wants to publish media playback information or handle media keys.</p>
<p>To build a <code>MediaStyle</code> notification for this example, the <code>MediaPlayerService</code> will make use of <code>MediaSession</code>s transport controls to add notification controls and publish <code>MetaData</code> so the Android system know that it’s playing audio.</p>
<p>Before moving on, add the following variables in the <code>MediaPlayerService</code> class.</p><div class="proper-ad-unit">
          <div id="proper-ad-sitepoint_content_6">
            <script>
              window.propertag.cmd.push(function() {
                proper_display('sitepoint_content_6');
              });
            </script></div>
        </div><p></p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">public static final String ACTION_PLAY = "com.valdioveliu.valdio.audioplayer.ACTION_PLAY";
public static final String ACTION_PAUSE = "com.valdioveliu.valdio.audioplayer.ACTION_PAUSE";
public static final String ACTION_PREVIOUS = "com.valdioveliu.valdio.audioplayer.ACTION_PREVIOUS";
public static final String ACTION_NEXT = "com.valdioveliu.valdio.audioplayer.ACTION_NEXT";
public static final String ACTION_STOP = "com.valdioveliu.valdio.audioplayer.ACTION_STOP";

//MediaSession
private MediaSessionManager mediaSessionManager;
private MediaSessionCompat mediaSession;
private MediaControllerCompat.TransportControls transportControls;

//AudioPlayer notification ID
private static final int NOTIFICATION_ID = 101;
</code></pre>
<p>The <code>String</code> variables are used to notify which action is triggered from the <code>MediaSession</code> callback listener. The rest of the instances relate to the <code>MediaSession</code> and a notification ID to uniquely identify the MediaStyle notification.</p>
<p>The following functions handle the initialization of the <code>MediaSession</code> and setting the <code>MetaData</code> to an active session. An important part of the following <code>initMediaSession()</code> function is setting the <code>MediaSession</code> callbacks to handle events coming from the notification buttons.</p>
<p>Add the following functions in the <code>MediaPlayerService</code> class.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">private void initMediaSession() throws RemoteException {
  if (mediaSessionManager != null) return; //mediaSessionManager exists

  mediaSessionManager = (MediaSessionManager) getSystemService(Context.MEDIA_SESSION_SERVICE);
  // Create a new MediaSession
  mediaSession = new MediaSessionCompat(getApplicationContext(), "AudioPlayer");
  //Get MediaSessions transport controls
  transportControls = mediaSession.getController().getTransportControls();
  //set MediaSession -&gt; ready to receive media commands
  mediaSession.setActive(true);
  //indicate that the MediaSession handles transport control commands
  // through its MediaSessionCompat.Callback.
  mediaSession.setFlags(MediaSessionCompat.FLAG_HANDLES_TRANSPORT_CONTROLS);

  //Set mediaSession's MetaData
  updateMetaData();

  // Attach Callback to receive MediaSession updates
  mediaSession.setCallback(new MediaSessionCompat.Callback() {
      // Implement callbacks
      @Override
      public void onPlay() {
          super.onPlay();
          resumeMedia();
          buildNotification(PlaybackStatus.PLAYING);
      }

      @Override
      public void onPause() {
          super.onPause();
          pauseMedia();
          buildNotification(PlaybackStatus.PAUSED);
      }

      @Override
      public void onSkipToNext() {
          super.onSkipToNext();
          skipToNext();
          updateMetaData();
          buildNotification(PlaybackStatus.PLAYING);
      }

      @Override
      public void onSkipToPrevious() {
          super.onSkipToPrevious();
          skipToPrevious();
          updateMetaData();
          buildNotification(PlaybackStatus.PLAYING);
      }

      @Override
      public void onStop() {
          super.onStop();
          removeNotification();
          //Stop the service
          stopSelf();
      }

      @Override
      public void onSeekTo(long position) {
          super.onSeekTo(position);
      }
  });
}

private void updateMetaData() {
  Bitmap albumArt = BitmapFactory.decodeResource(getResources(),
          R.drawable.image); //replace with medias albumArt
  // Update the current metadata
  mediaSession.setMetadata(new MediaMetadataCompat.Builder()
          .putBitmap(MediaMetadataCompat.METADATA_KEY_ALBUM_ART, albumArt)
          .putString(MediaMetadataCompat.METADATA_KEY_ARTIST, activeAudio.getArtist())
          .putString(MediaMetadataCompat.METADATA_KEY_ALBUM, activeAudio.getAlbum())
          .putString(MediaMetadataCompat.METADATA_KEY_TITLE, activeAudio.getTitle())
          .build());
}
</code></pre>
<p>The <code>updateMetaData()</code> method has a <code>Bitmap</code> image that you need to create, so add an image to the <em>drawable</em> folder of the project. The <code>Callback()</code> override methods make use of the media player key functions described earlier. Next add the media player functions mentioned earlier to the <code>Service</code>.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">private void skipToNext() {

    if (audioIndex == audioList.size() - 1) {
        //if last in playlist
        audioIndex = 0;
        activeAudio = audioList.get(audioIndex);
    } else {
        //get next in playlist
        activeAudio = audioList.get(++audioIndex);
    }

    //Update stored index
    new StorageUtil(getApplicationContext()).storeAudioIndex(audioIndex);

    stopMedia();
    //reset mediaPlayer
    mediaPlayer.reset();
    initMediaPlayer();
}

private void skipToPrevious() {

    if (audioIndex == 0) {
        //if first in playlist
        //set index to the last of audioList
        audioIndex = audioList.size() - 1;
        activeAudio = audioList.get(audioIndex);
    } else {
        //get previous in playlist
        activeAudio = audioList.get(--audioIndex);
    }

    //Update stored index
    new StorageUtil(getApplicationContext()).storeAudioIndex(audioIndex);

    stopMedia();
    //reset mediaPlayer
    mediaPlayer.reset();
    initMediaPlayer();
}
</code></pre>
<p>Now the service needs a way to build the <code>MediaStyle</code> notification, but the service needs a way to keep track of its playback status. For this create a new enumeration.</p>
<p>In your project create the following class.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">public enum PlaybackStatus {
    PLAYING,
    PAUSED
}
</code></pre>
<p>Now the service has a way to keep track of its playback status add the following function for building the notifications.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">private void buildNotification(PlaybackStatus playbackStatus) {

    int notificationAction = android.R.drawable.ic_media_pause;//needs to be initialized
    PendingIntent play_pauseAction = null;

    //Build a new notification according to the current state of the MediaPlayer
    if (playbackStatus == PlaybackStatus.PLAYING) {
        notificationAction = android.R.drawable.ic_media_pause;
        //create the pause action
        play_pauseAction = playbackAction(1);
    } else if (playbackStatus == PlaybackStatus.PAUSED) {
        notificationAction = android.R.drawable.ic_media_play;
        //create the play action
        play_pauseAction = playbackAction(0);
    }

    Bitmap largeIcon = BitmapFactory.decodeResource(getResources(),
            R.drawable.image); //replace with your own image

    // Create a new Notification
    NotificationCompat.Builder notificationBuilder = (NotificationCompat.Builder) new NotificationCompat.Builder(this)
            .setShowWhen(false)
            // Set the Notification style
            .setStyle(new NotificationCompat.MediaStyle()
                    // Attach our MediaSession token
                    .setMediaSession(mediaSession.getSessionToken())
                    // Show our playback controls in the compact notification view.
                    .setShowActionsInCompactView(0, 1, 2))
            // Set the Notification color
            .setColor(getResources().getColor(R.color.colorPrimary))
            // Set the large and small icons
            .setLargeIcon(largeIcon)
            .setSmallIcon(android.R.drawable.stat_sys_headset)
            // Set Notification content information
            .setContentText(activeAudio.getArtist())
            .setContentTitle(activeAudio.getAlbum())
            .setContentInfo(activeAudio.getTitle())
            // Add playback actions
            .addAction(android.R.drawable.ic_media_previous, "previous", playbackAction(3))
            .addAction(notificationAction, "pause", play_pauseAction)
            .addAction(android.R.drawable.ic_media_next, "next", playbackAction(2));

    ((NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE)).notify(NOTIFICATION_ID, notificationBuilder.build());
}

private void removeNotification() {
    NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
    notificationManager.cancel(NOTIFICATION_ID);
}
</code></pre>
<p>When called, this function will build the notification according to the <code>PlaybackStatus</code>.</p>
<p>The main purpose of the <code>buildNotification()</code> function is building the notification UI and setting up all the events that will trigger when a user clicks a notification button. You generate the actions through <code>PendingIntent</code>s from the <code>playbackAction()</code> function. Add it to the <code>MediaPlayerService</code>.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">private PendingIntent playbackAction(int actionNumber) {
  Intent playbackAction = new Intent(this, MediaPlayerService.class);
  switch (actionNumber) {
      case 0:
          // Play
          playbackAction.setAction(ACTION_PLAY);
          return PendingIntent.getService(this, actionNumber, playbackAction, 0);
      case 1:
          // Pause
          playbackAction.setAction(ACTION_PAUSE);
          return PendingIntent.getService(this, actionNumber, playbackAction, 0);
      case 2:
          // Next track
          playbackAction.setAction(ACTION_NEXT);
          return PendingIntent.getService(this, actionNumber, playbackAction, 0);
      case 3:
          // Previous track
          playbackAction.setAction(ACTION_PREVIOUS);
          return PendingIntent.getService(this, actionNumber, playbackAction, 0);
      default:
          break;
  }
  return null;
}
</code></pre>
<p>Now that the service generates actions when the user clicks on the notification buttons it needs a way to handle these actions. Add the following action to the service.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">private void handleIncomingActions(Intent playbackAction) {
  if (playbackAction == null || playbackAction.getAction() == null) return;

  String actionString = playbackAction.getAction();
  if (actionString.equalsIgnoreCase(ACTION_PLAY)) {
      transportControls.play();
  } else if (actionString.equalsIgnoreCase(ACTION_PAUSE)) {
      transportControls.pause();
  } else if (actionString.equalsIgnoreCase(ACTION_NEXT)) {
      transportControls.skipToNext();
  } else if (actionString.equalsIgnoreCase(ACTION_PREVIOUS)) {
      transportControls.skipToPrevious();
  } else if (actionString.equalsIgnoreCase(ACTION_STOP)) {
      transportControls.stop();
  }
}
</code></pre>
<p>This function figures out which of the playback actions is triggered and executes one of the <code>MediaSession</code> callback methods through its transport controls. The callback methods, implemented in the <code>initMediaSession()</code> function handle all the <code>MediaPlayer</code> actions.</p>
<h2 id="finishingup">Finishing Up</h2>
<p>All that is left is to define the services <code>onStartCommand()</code> method. This method will handle the initialization of the <code>MediaSession</code>, the <code>MediaPlayer</code>, loading the cached audio playlist and building the <code>MediaStyle</code> notification. In the service class replace the old <code>onStartCommand()</code> method with the following.</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">@Override
public int onStartCommand(Intent intent, int flags, int startId) {
  try {
      //Load data from SharedPreferences
      StorageUtil storage = new StorageUtil(getApplicationContext());
      audioList = storage.loadAudio();
      audioIndex = storage.loadAudioIndex();

      if (audioIndex != -1 &amp;&amp; audioIndex &lt; audioList.size()) {
          //index is in a valid range
          activeAudio = audioList.get(audioIndex);
      } else {
          stopSelf();
      }
  } catch (NullPointerException e) {
      stopSelf();
  }

  //Request audio focus
  if (requestAudioFocus() == false) {
      //Could not gain focus
      stopSelf();
  }

  if (mediaSessionManager == null) {
      try {
          initMediaSession();
          initMediaPlayer();
      } catch (RemoteException e) {
          e.printStackTrace();
          stopSelf();
      }
      buildNotification(PlaybackStatus.PLAYING);
  }

  //Handle Intent action from MediaSession.TransportControls
  handleIncomingActions(intent);
  return super.onStartCommand(intent, flags, startId);
}
</code></pre>
<p>In the <code>initMediaPlayer()</code> function replace the <code>setDataSource()</code> call with the following line</p>
<pre tabindex="0" class="  language-java"><code class="java  language-java">mediaPlayer.setDataSource(activeAudio.getData());
</code></pre>
<p>That sums it up for playing audio in a background service in Android. Now run the app and play audio the right way. Here is an example how my sample app looks. I added a <code>RecyclerView</code> to the app and the layout might look different, but the notification view and controls are the same.</p>
<p><img src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/1471529082Screenshot_2016-08-12-19-31-48.png" alt="Screenshot"></p>
<p><img src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/1471529092Screenshot_2016-08-12-19-32-09.png" alt="Screenshot"></p>
<p><img src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/1471529101Screenshot_2016-08-12-19-32-28.png" alt="Screenshot"></p>
<h2 id="fastforward">Fast Forward</h2>
<p>And that’s it! I understand there was a lot to absorb and understand in this tutorial, so if you have any questions or comments, please let me know below.</p>
</section><div aria-label="Article sidebar" class="styledSidebar__StyledSidebar-dk1f5i-0 gUPsYy"><div class="styledSidebar__Authors-dk1f5i-1 flVAfR"><div class="styledSidebar__Author-dk1f5i-2 gUssep"><div class="styledSidebar__AuthorMeta-dk1f5i-3 bUmtIR dXNlcjo3MjAyNQ=="><img src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/1437387238valdio-96x96.jpg" alt="Valdio Veliu" class="styledSidebar__AuthorAvatar-dk1f5i-4 bStwAa"><div><h3 class="styledSidebar__AuthorName-dk1f5i-5 jDFjfW"><a href="https://www.sitepoint.com/author/valdioveliu">Valdio Veliu</a></h3><a href="https://github.com/valdio" rel="noreferrer noopener" target="_blank" aria-label="Valdio Veliu&#39;s github account" class="styledSidebar__AuthorContact-dk1f5i-6 ifIiXv"><i class="fab fa-github-square"></i></a><a href="https://www.sitepoint.com/a-step-by-step-guide-to-building-an-android-audio-player-app/valdio" rel="noreferrer noopener" target="_blank" aria-label="Valdio Veliu&#39;s linkedin account" class="styledSidebar__AuthorContact-dk1f5i-6 ifIiXv"><i class="fab fa-linkedin"></i></a></div></div><p class="styledSidebar__AuthorDescription-dk1f5i-7 drpYYF">Valdio recently graduated in Computer Engineering. He is a mobile developer, who is passionate about mobile technologies and learning new things. He has worked with languages such as C, Java, php and is currently focused on Java, mobile and web development</p></div></div><div type="books_new" class="styledPromoteBox__StyledPromoteBox-sc-1lx5aae-0 iYjbBU" id="side_book_67fa3a1588024125668"><div><div class="styledBooksNew__StyledBooksNew-sc-1wtbcbh-0 bMoqNr"><h4> New books out now!</h4><div class="styledBook__StyledBook-sc-1f7vk4f-0 LcvTZ"><div><div class="styledBook__BookCoverContainer-sc-1f7vk4f-1 cjRZIh"><figure type="spine" class="styledBookCover__StyledBookCover-beflyc-0 hNYtzW"><div class="styledBookCover__Spine-beflyc-1 ePRdzX"><img src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/ee3c684b-45e4-468a-9b7a-b2c53313f324.png" class="styledBookCover__Img-beflyc-2 hjHque"></div></figure></div><div class="styledBook__PContainer-sc-1f7vk4f-2 hgthhm"><p font-weight="400" class="p__P-j9v9zk-0 gDhSTQ">💁‍♀️ Fun Fact: Python was ranked #2 on a recent highest paid coders list. <a href="https://simpleprogrammer.com/7-reasons-why-you-should-learn-python/#python-salary">*</a></p></div></div><div class="styledBook__CTAContainer-sc-1f7vk4f-3 gBefjl"><a id="book-1eqd51588024298163" href="https://www.sitepoint.com/premium/books/the-python-apprentice" color="blue" type="outline" class="button__Button-tmcfcj-0 ivaYFQ">Can I learn Python?</a></div></div><hr><div class="styledBook__StyledBook-sc-1f7vk4f-0 LcvTZ"><div><div class="styledBook__BookCoverContainer-sc-1f7vk4f-1 cjRZIh"><figure type="spine" class="styledBookCover__StyledBookCover-beflyc-0 hNYtzW"><div class="styledBookCover__Spine-beflyc-1 ePRdzX"><img src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/ca8e7cc0-370b-4af2-b973-97955befbeb7_medium.png" class="styledBookCover__Img-beflyc-2 hjHque"></div></figure></div><div class="styledBook__PContainer-sc-1f7vk4f-2 hgthhm"><p font-weight="400" class="p__P-j9v9zk-0 gDhSTQ">🤓 Ok. When did a code editor from Microsoft become <em>kinda</em> cool!?</p></div></div><div class="styledBook__CTAContainer-sc-1f7vk4f-3 gBefjl"><a id="book-4zzb5h1588024298164" href="https://www.sitepoint.com/premium/books/visual-studio-code-end-to-end-editing-and-debugging-tools-for-web-developers" color="blue" type="outline" class="button__Button-tmcfcj-0 ivaYFQ">Strange but true!</a></div></div></div></div></div><div class="styledPopularBooks__StyledPopularBooks-sc-98zu2f-0 dCTqAQ"><h3 class="styledPopularBooks__StyledPopularBooksTitle-sc-98zu2f-1 jijLNq">Popular Books</h3><a href="https://www.sitepoint.com/premium/books/visual-studio-code-end-to-end-editing-and-debugging-tools-for-web-developers" rel="noreferrer noopener" target="_blank" aria-label="Visual Studio Code: End-to-End Editing and Debugging Tools for Web Developers&#39;s page" class="styledPopularBooks__Book-sc-98zu2f-2 bVMLhN"><div class="styledPopularBooks__BookImgContainer-sc-98zu2f-3 dNTEUy cover-spine-overlay"><img src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/ca8e7cc0-370b-4af2-b973-97955befbeb7_medium.png" alt="visual-studio-code-end-to-end-editing-and-debugging-tools-for-web-developers" class="styledPopularBooks__BookImg-sc-98zu2f-4 hFghmq"></div><p class="styledPopularBooks__BookTitle-sc-98zu2f-5 fefnBN">Visual Studio Code: End-to-End Editing and Debugging Tools for Web Developers</p></a><a href="https://www.sitepoint.com/premium/books/the-art-of-working-remotely" rel="noreferrer noopener" target="_blank" aria-label="The Art of Working Remotely&#39;s page" class="styledPopularBooks__Book-sc-98zu2f-2 bVMLhN"><div class="styledPopularBooks__BookImgContainer-sc-98zu2f-3 dNTEUy cover-spine-overlay"><img src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/7cc2d7bc-8faf-479a-8339-73290ec75860_medium.jpg" alt="the-art-of-working-remotely" class="styledPopularBooks__BookImg-sc-98zu2f-4 hFghmq"></div><p class="styledPopularBooks__BookTitle-sc-98zu2f-5 fefnBN">The Art of Working Remotely</p></a><a href="https://www.sitepoint.com/premium/books/form-design-patterns" rel="noreferrer noopener" target="_blank" aria-label="Form Design Patterns&#39;s page" class="styledPopularBooks__Book-sc-98zu2f-2 bVMLhN"><div class="styledPopularBooks__BookImgContainer-sc-98zu2f-3 dNTEUy cover-spine-overlay"><img src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/788aa26e-18e5-409c-977e-d7a6f865e47e_medium.png" alt="form-design-patterns" class="styledPopularBooks__BookImg-sc-98zu2f-4 hFghmq"></div><p class="styledPopularBooks__BookTitle-sc-98zu2f-5 fefnBN">Form Design Patterns</p></a></div><div type="no_fallback" class="styledPromoteBox__StyledPromoteBox-sc-1lx5aae-0 eEREJF" id="side_1_h2s5or1588024125668"><div></div></div><div type="no_fallback" class="styledPromoteBox__StyledPromoteBox-sc-1lx5aae-0 eEREJF" id="side_2_9tood1588024125668"><div></div></div></div></div></article><article aria-label="Article title: Mobile Attribution 101: What Every Developer Needs to Know" class="cG9zdDoxNzMxOTY="><section aria-label="Article header for Mobile Attribution 101: What Every Developer Needs to Know" color="mobile" class="styledHeader__StyledHeader-sc-1ei2vfl-0 humGsZ"><div class="styledHeader__Wrapper-sc-1ei2vfl-1 cHUmue"><header class="styledHeader__Info-sc-1ei2vfl-2 LTMfA"><h1 class="styledHeader__Title-sc-1ei2vfl-4 jNIbMf">Mobile Attribution 101: What Every Developer Needs to Know</h1><div class="styledHeader__Metabox-sc-1ei2vfl-3 ciGkhP"><div><p class="styledHeader__Meta-sc-1ei2vfl-5 dvfXdt">By&nbsp;<a href="https://www.sitepoint.com/author/dgoldstein">Dvora Goldstein</a></p><p class="styledHeader__Meta-sc-1ei2vfl-5 dvfXdt">Mobile</p><time datetime="2019-08-05" class="styledHeader__Meta-sc-1ei2vfl-5 dvfXdt">August 5, 2019</time></div><div><p class="styledHeader__Meta-sc-1ei2vfl-5 dvfXdt">Share:</p><button aria-label="Share Sitepoint on facebook" data-network="facebook" class="styledSocialShare__StyledButton-sc-1slciz-0 bTeKVi"><div class="fab fa-facebook-square"></div></button><button aria-label="Share Sitepoint on reddit" data-network="reddit" class="styledSocialShare__StyledButton-sc-1slciz-0 bTeKVi"><div class="fab fa-reddit"></div></button><button aria-label="Share Sitepoint on twitter" data-network="twitter" class="styledSocialShare__StyledButton-sc-1slciz-0 bTeKVi"><div class="fab fa-twitter-square"></div></button><button aria-label="Share Sitepoint on email" data-network="email" class="styledSocialShare__StyledButton-sc-1slciz-0 bTeKVi"><div class="fa fa-envelope"></div></button></div></div></header><div type="book" class="styledPromoteBox__StyledPromoteBox-sc-1lx5aae-0 WbpJY" id="header_book_xmjpid1588024298092"><div><div class="styledBook__StyledBook-sc-1f7vk4f-0 LcvTZ"><div><div class="styledBook__BookCoverContainer-sc-1f7vk4f-1 cjRZIh"><figure type="spine" class="styledBookCover__StyledBookCover-beflyc-0 hNYtzW"><div class="styledBookCover__Spine-beflyc-1 ePRdzX"><img src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/4c7f6303-60e8-45dc-a95b-aae08a4f32a3.png" class="styledBookCover__Img-beflyc-2 hjHque"></div></figure></div><div class="styledBook__PContainer-sc-1f7vk4f-2 hgthhm"><p font-weight="400" class="p__P-j9v9zk-0 gDhSTQ">😳 Ever felt a little embarassed sharing your JavaScript? Let's fix it.</p></div></div><div class="styledBook__CTAContainer-sc-1f7vk4f-3 gBefjl"><a id="book-154na1588024298095" href="https://www.sitepoint.com/premium/books/javascript-best-practice" color="blue" type="outline" class="button__Button-tmcfcj-0 ivaYFQ">Code proud! ;)</a></div></div></div></div></div></section><div class="styledPost__StyledPost-sc-4qaqpu-0 letBtp"><section aria-label="Article content for Mobile Attribution 101: What Every Developer Needs to Know" class="styledBody__StyledBody-kvy0sj-0 enxCuw"><p><em>This article was created in partnership with <a href="http://studioworks.me/" rel="nofollow">StudioWorks</a>. Thank you for supporting the partners who make SitePoint possible.</em></p>
<p><strong>Optimizing the user experience of your app is crucial for its success, and the best way to do so is by collecting data on how users interact with it. While regular analytic tools do a good job, there’s an even <em>better</em> way now.</strong></p>
<p>Welcome to <strong>mobile attribution</strong>. This approach to measuring app performance allows you to discover where and how users are interacting with your app and connect them with key points in the app journey.</p>
<p>But what exactly <em>is</em> mobile attribution and how do you use it? Keep reading to learn.</p>
<h2 id="mobileattributionexplained">Mobile Attribution Explained</h2>
<p><strong>Mobile attribution</strong> is the process of measuring two metrics, such as ad spend and app installs. Given that the <a href="https://www.statista.com/statistics/280640/mobile-advertising-spending-worldwide/" rel="nofollow">mobile advertising industry will exceed $244 billion by 2020</a>, you need to know which strategies and channels are wasting your money or generating the most returns.</p>
<p>Mobile attribution also helps mobile app developers and companies determine how users are interacting with apps and mobile ads. This information can then be used to optimize marketing campaigns, the user experience of an app, and more.</p>
<p>In a nutshell, the process looks like this:</p>
<div style="margin-bottom: 1.5em;">
<img style="margin-bottom: 0.5em;" src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/1564962458image1.jpg" alt="How mobile attribution works: user clicks ad; user ID saved to network; user installs app; user opens app; attribution SKD launches; attribution tool collects data" width="1000" height="242" class="alignnone size-full wp-image-173198"><span style="display:block; font-size:0.8em; text-align:center; margin: 0;">How mobile attribution works</span>
</div>
<p>Not <a href="https://www.appsflyer.com/product/mobile-attribution/" rel="nofollow">taking advantage of mobile attribution</a> means that you won’t have the most detailed and accurate data on your mobile app and its advertising performance. This can result in missing opportunities when they arise, or discovering problems too late.</p>
<div style="margin-bottom: 1.5em;">
<img style="margin-bottom: 0.5em;" src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/1564962655image2.jpg" alt="Appsflyer: people-based attribution. One view of all devices, platforms and channels" width="1000" height="463" class="alignnone size-full wp-image-173199"><span style="display:block; font-size:0.8em; text-align:center; margin: 0;">Appsflyer is a market leader in ad attribution and analytics with their proprietary “People-based Attribution” technology</span>
</div>
<p>Next, let’s talk more about <em>why</em> you should be using mobile attribution.</p>
<h2 id="thebenefitsofmobileattribution">The Benefits of Mobile Attribution</h2>
<p>These are some of the main benefits you will experience by taking advantage of mobile attribution.</p>
<h3 id="trackusereventstooptimizeyourapp">Track user events to optimize your app</h3>
<p>You will be able to track every little detail of how users interact with mobile ad campaigns in your app. This includes where they found your app originally, which pages they navigate to, and what features they interact with the most.</p>
<p>This information is <em>priceless</em>. It’s telling you exactly what pages and features users enjoy the most, which channels drive the most traffic, and what campaigns are generating the most results for your app.</p>
<p>You can then invest more capital into profitable channels, push favorite features to the forefront, and improve how every user engages with your application.</p>
<h3 id="reduceadspendandimprovecampaignperformance">Reduce ad spend and improve campaign performance</h3>
<p>Imagine being able to quickly discover which ad campaigns and channels <em>are</em> and <em>aren’t</em> driving results. You could cut the losers and invest more into the winners. That’s possible thanks to mobile attribution techniques.</p>
<p>Mobile attribution will present you with data on which advertisements, campaigns, and individual networks drive the most traffic, installs, and conversions to your app.</p>
<p>Many companies throw incredible amounts of money into poor performing campaigns and channels because <a href="https://www.information-age.com/mobile-attribution-trends-123482621/" rel="nofollow">they don’t have the data that mobile attribution can provide</a>. Don’t be one of them.</p>
<h2 id="howtousemobileattribution">How to Use Mobile Attribution</h2>
<p>Mobile attribution is great and all, but how do you actually do it?</p>
<p>The first way is to use <strong>mobile app deep linking</strong>. This can be used to collect data on how users interact with your app. Deep linking is also capable of increasing installations and brand awareness.</p>
<p>Deep linking is available for both iOS and Android devices. By adding specific lines of code to a mobile app, developers are able to push users to the app store to download their app if they don’t have it and then forward them to the intended location.</p>
<div style="margin-bottom: 1.5em;">
<img style="margin-bottom: 0.5em;" src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/1564962756image3.jpg" alt="Mobile app deep linking example: user clicks mobile deep link from search results; user forwarded to appropriate app store; app opens on intended page" width="1000" height="271" class="alignnone size-full wp-image-173200"><span style="display:block; font-size:0.8em; text-align:center; margin: 0;">Mobile app deep linking example</span>
</div>
<div class="inline-roller"><div class="styledRollerDoor__StyledRollerDoor-sc-16spu5e-1 jpqESm" style="height: 0px;"><div class="styledRollerDoor__Content-sc-16spu5e-0 fznjz"><div type="book_form" class="styledPromoteBox__StyledPromoteBox-sc-1lx5aae-0 gOWFaY" id="rollerdoor_book_ra3pb1588024298672"><div><div class="styledBookForm__StyledBookForm-sc-12b2f31-0 gWwHuS"><div class="styledBookForm__BookCoverContainer-sc-12b2f31-1 wmNXB"><figure type="default" class="styledBookCover__StyledBookCover-beflyc-0 dRQRgl"><img src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/34dcc72f-800f-4332-ab0c-31f0c4c4aad7.png" class="styledBookCover__Img-beflyc-2 hjHque"></figure></div><div class="styledBookForm__FormContainer-sc-12b2f31-2 kyRVuf"><p font-weight="300" class="p__P-j9v9zk-0 cKeNIC">🤷 If <a href="https://w3techs.com/technologies/details/cm-wordpress">35% of ALL websites </a> are WordPress, is PHP really that dead?</p><p font-weight="400" class="p__P-j9v9zk-0 gDhSTQ">Get 'PHP &amp; MySQL: Novice to Ninja, 6th Edition' for free.</p><div class="styledBookForm__CTAContainer-sc-12b2f31-3 cCyJhi"><a href="https://www.sitepoint.com/premium/books/php-mysql-novice-to-ninja-6th-edition" color="blue" type="outline" class="button__Button-tmcfcj-0 ivaYFQ">Find out more</a></div></div></div></div></div></div></div></div><p><strong>Deep links</strong>, as the name suggests, link to deeper features within an app versus the welcome screen. This saves users time and allows them to get to where they want to be faster.</p>
<p>You can follow the <a href="https://developer.android.com/training/app-links/deep-linking" rel="nofollow">official Android</a> and <a href="https://developer.apple.com/ios/universal-links/" rel="nofollow">Apple documentation</a> to learn how to add deep links into your app to begin reaping the benefits of mobile attribution.</p>
<p>Additionally, companies can invest in mobile attribution <em>services</em>. These give you all the tools and dashboards you need to collect deep analytics on your userbase and app.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Mobile attribution allows developers to bridge the gap between users and apps to collect critical information. This data can then be used to optimize the user experience, ads, and marketing campaigns.</p>
<p>You can start using mobile attribution today by <a href="https://en.softonic.com/articles/how-to-track-your-mobile-app-campaign-using-deeplinks" rel="nofollow">enabling deep links</a> within your or app or investing in attribution services that do most of the heavy lifting on your behalf.</p>
<p>What’s your experience so far with mobile attribution?</p>
</section><div aria-label="Article sidebar" class="styledSidebar__StyledSidebar-dk1f5i-0 gUPsYy"><div class="styledSidebar__Authors-dk1f5i-1 flVAfR"><div class="styledSidebar__Author-dk1f5i-2 gUssep"><div class="styledSidebar__AuthorMeta-dk1f5i-3 bUmtIR dXNlcjo3MjczMA=="><img src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/1564964206dvora_goldstein-150x150.jpeg" alt="Dvora Goldstein" class="styledSidebar__AuthorAvatar-dk1f5i-4 bStwAa"><div><h3 class="styledSidebar__AuthorName-dk1f5i-5 jDFjfW"><a href="https://www.sitepoint.com/author/dgoldstein">Dvora Goldstein</a></h3><a href="https://twitter.com/DvoraGoldstein" rel="noreferrer noopener" target="_blank" aria-label="Dvora Goldstein&#39;s twitter account" class="styledSidebar__AuthorContact-dk1f5i-6 ifIiXv"><i class="fab fa-twitter-square"></i></a></div></div><p class="styledSidebar__AuthorDescription-dk1f5i-7 drpYYF">Dvora is a freelance writer residing in Tel Aviv, Israel with 5 years of internet marketing experience. She frequently writes about SEO, Social media and all-things blogging. Learn more about Dvora on <a href="https://about.me/dvoragoldstein">About.me</a>.</p></div></div><div type="books_new" class="styledPromoteBox__StyledPromoteBox-sc-1lx5aae-0 iYjbBU" id="side_book_xe3buh1588024298092"><div><div class="styledBooksNew__StyledBooksNew-sc-1wtbcbh-0 bMoqNr"><h4> New books out now!</h4><div class="styledBook__StyledBook-sc-1f7vk4f-0 LcvTZ"><div><div class="styledBook__BookCoverContainer-sc-1f7vk4f-1 cjRZIh"><figure type="spine" class="styledBookCover__StyledBookCover-beflyc-0 hNYtzW"><div class="styledBookCover__Spine-beflyc-1 ePRdzX"><img src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/ee3c684b-45e4-468a-9b7a-b2c53313f324.png" class="styledBookCover__Img-beflyc-2 hjHque"></div></figure></div><div class="styledBook__PContainer-sc-1f7vk4f-2 hgthhm"><p font-weight="400" class="p__P-j9v9zk-0 gDhSTQ">💁‍♀️ Fun Fact: Python was ranked #2 on a recent highest paid coders list. <a href="https://simpleprogrammer.com/7-reasons-why-you-should-learn-python/#python-salary">*</a></p></div></div><div class="styledBook__CTAContainer-sc-1f7vk4f-3 gBefjl"><a id="book-xw54w61588024298097" href="https://www.sitepoint.com/premium/books/the-python-apprentice" color="blue" type="outline" class="button__Button-tmcfcj-0 ivaYFQ">Can I learn Python?</a></div></div><hr><div class="styledBook__StyledBook-sc-1f7vk4f-0 LcvTZ"><div><div class="styledBook__BookCoverContainer-sc-1f7vk4f-1 cjRZIh"><figure type="spine" class="styledBookCover__StyledBookCover-beflyc-0 hNYtzW"><div class="styledBookCover__Spine-beflyc-1 ePRdzX"><img src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/ca8e7cc0-370b-4af2-b973-97955befbeb7_medium.png" class="styledBookCover__Img-beflyc-2 hjHque"></div></figure></div><div class="styledBook__PContainer-sc-1f7vk4f-2 hgthhm"><p font-weight="400" class="p__P-j9v9zk-0 gDhSTQ">🤓 Ok. When did a code editor from Microsoft become <em>kinda</em> cool!?</p></div></div><div class="styledBook__CTAContainer-sc-1f7vk4f-3 gBefjl"><a id="book-i5o629j1588024298100" href="https://www.sitepoint.com/premium/books/visual-studio-code-end-to-end-editing-and-debugging-tools-for-web-developers" color="blue" type="outline" class="button__Button-tmcfcj-0 ivaYFQ">Strange but true!</a></div></div></div></div></div><div class="styledPopularBooks__StyledPopularBooks-sc-98zu2f-0 dCTqAQ"><h3 class="styledPopularBooks__StyledPopularBooksTitle-sc-98zu2f-1 jijLNq">Popular Books</h3><a href="https://www.sitepoint.com/premium/books/visual-studio-code-end-to-end-editing-and-debugging-tools-for-web-developers" rel="noreferrer noopener" target="_blank" aria-label="Visual Studio Code: End-to-End Editing and Debugging Tools for Web Developers&#39;s page" class="styledPopularBooks__Book-sc-98zu2f-2 bVMLhN"><div class="styledPopularBooks__BookImgContainer-sc-98zu2f-3 dNTEUy cover-spine-overlay"><img src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/ca8e7cc0-370b-4af2-b973-97955befbeb7_medium.png" alt="visual-studio-code-end-to-end-editing-and-debugging-tools-for-web-developers" class="styledPopularBooks__BookImg-sc-98zu2f-4 hFghmq"></div><p class="styledPopularBooks__BookTitle-sc-98zu2f-5 fefnBN">Visual Studio Code: End-to-End Editing and Debugging Tools for Web Developers</p></a><a href="https://www.sitepoint.com/premium/books/the-art-of-working-remotely" rel="noreferrer noopener" target="_blank" aria-label="The Art of Working Remotely&#39;s page" class="styledPopularBooks__Book-sc-98zu2f-2 bVMLhN"><div class="styledPopularBooks__BookImgContainer-sc-98zu2f-3 dNTEUy cover-spine-overlay"><img src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/7cc2d7bc-8faf-479a-8339-73290ec75860_medium.jpg" alt="the-art-of-working-remotely" class="styledPopularBooks__BookImg-sc-98zu2f-4 hFghmq"></div><p class="styledPopularBooks__BookTitle-sc-98zu2f-5 fefnBN">The Art of Working Remotely</p></a><a href="https://www.sitepoint.com/premium/books/form-design-patterns" rel="noreferrer noopener" target="_blank" aria-label="Form Design Patterns&#39;s page" class="styledPopularBooks__Book-sc-98zu2f-2 bVMLhN"><div class="styledPopularBooks__BookImgContainer-sc-98zu2f-3 dNTEUy cover-spine-overlay"><img src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/788aa26e-18e5-409c-977e-d7a6f865e47e_medium.png" alt="form-design-patterns" class="styledPopularBooks__BookImg-sc-98zu2f-4 hFghmq"></div><p class="styledPopularBooks__BookTitle-sc-98zu2f-5 fefnBN">Form Design Patterns</p></a></div><div type="no_fallback" class="styledPromoteBox__StyledPromoteBox-sc-1lx5aae-0 eEREJF" id="side_1_z42lsd1588024298092"><div></div></div><div type="no_fallback" class="styledPromoteBox__StyledPromoteBox-sc-1lx5aae-0 eEREJF" id="side_2_5h1d7r1588024298092"><div></div></div><div id="side_3_1z7z51588024298092" class="styledSticky__StyledSticky-x82kw-0 cvOEJr proper-sticky"></div></div></div></article><div class="styledLoader__StyledLoader-sc-1siylp2-2 kxDoH"><i class="styledLoader__Icon-sc-1siylp2-0 iBBcgv far fa-spinner"></i></div></div></main><footer class="styledFooter__StyledFooter-sc-1xzv3gd-0 deWRVZ"><nav aria-label="Footer navigation"><div class="styledFooter__Container-sc-1xzv3gd-2 gkisFa"><div class="footer-links"><ul><li><h2>Stuff we do</h2></li><li><a href="https://www.sitepoint.com/premium">Premium</a></li><li><a href="https://www.sitepoint.com/community">Forums</a></li><li><a href="https://sitepoint.typeform.com/to/fNY7XG">Corporate memberships</a></li><li><a href="https://sitepoint.tapfiliate.com/">Become an affiliate</a></li><li><a href="https://www.sitepoint.com/jobs">Remote Jobs</a></li></ul><ul><li><h2>About</h2></li><li><a href="https://www.sitepoint.com/about-us">Our story</a></li></ul><ul><li><h2>Contact</h2></li><li><a href="https://www.sitepoint.com/contact-us">Contact us</a></li><li><a href="https://sitepoint.zendesk.com/hc/en-us">FAQ</a></li><li><a href="https://sitepoint.typeform.com/to/HtAXVN">Publish your book with us</a></li><li><a href="https://sitepoint.typeform.com/to/DMmYfn">Write an article for us</a></li><li><a href="https://www.sitepoint.com/advertise">Advertise</a></li></ul><ul><li><h2>Legals</h2></li><li><a href="https://www.sitepoint.com/legals">Terms of use</a></li><li><a href="https://www.sitepoint.com/privacy-policy">Privacy policy</a></li></ul></div><div class="styledFooter__Separator-sc-1xzv3gd-1 eXYzNg"></div><div class="footer-extra"><ul><li><h2>Connect</h2></li><li><a href="https://www.facebook.com/sitepoint" rel="noopener noreferrer" target="_blank" aria-label="See sitepoint facebook account"><i class="fab fa-facebook-square media"></i></a><a href="http://twitter.com/sitepointdotcom" rel="noopener noreferrer" target="_blank" aria-label="See sitepoint twitter account"><i class="fab fa-twitter-square media"></i></a><a href="https://www.sitepoint.com/feed" rel="noopener noreferrer" target="_blank" aria-label="See sitepoint RSS feed"><i class="fas fa-rss-square media"></i></a></li></ul><p>© 2000 – <!-- -->2020<!-- --> SitePoint Pty. Ltd.</p></div></div></nav></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/a-step-by-step-guide-to-building-an-android-audio-player-app/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-0b9c3c8ef2bd2c65c6eb.js"],"component---src-pages-404-js":["/component---src-pages-404-js-a23ffbd254d1f6aaa44a.js"],"component---src-pages-about-us-js":["/component---src-pages-about-us-js-b41cb27a110f3ae0ebba.js"],"component---src-pages-advertise-js":["/component---src-pages-advertise-js-5c38e052ad5ef46f3fcc.js"],"component---src-pages-contact-us-js":["/component---src-pages-contact-us-js-f2c92bb0b2293f431422.js"],"component---src-pages-index-js":["/component---src-pages-index-js-32de7e28e02dca793b05.js"],"component---src-pages-legals-js":["/component---src-pages-legals-js-3f78340e5ddc7b50669f.js"],"component---src-pages-privacy-policy-js":["/component---src-pages-privacy-policy-js-144e23e0eaf6bd3f712d.js"],"component---src-templates-author-index-js":["/component---src-templates-author-index-js-de4aa91c693289a885ee.js"],"component---src-templates-post-list-index-js":["/component---src-templates-post-list-index-js-870089f212d3cc004e11.js"],"component---src-templates-post-post-js":["/component---src-templates-post-post-js-36e464cb45c169b3f388.js"]};/*]]>*/</script><script src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/webpack-runtime-a2710040043a31b6bf8c.js.download" async=""></script><script src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/40c9d3da7812ce629f011ab775263392319f5a6e-1ce2ebbc10fa9a7f2b8f.js.download" async=""></script><script src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/926d4057eb4c11cdffc33bc58165cdfb9b6052e9-977a1d273ec5c42121c4.js.download" async=""></script><script src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/666dde8597d1f9d1c775385416e6ca4aab230ec4-1602ff8fa0f142f4d718.js.download" async=""></script><script src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/app-0b9c3c8ef2bd2c65c6eb.js.download" async=""></script><script src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/component---src-templates-post-post-js-36e464cb45c169b3f388.js.download" async=""></script><script src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/framework-d58e6aa01b2ba4423f5b.js.download" async=""></script><script src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/8f19945a102b8694b192e02096543c0a480101b8-abf24d0007a932337a17.js.download" async=""></script><iframe name="__cmpLocator" style="display: none;" src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/saved_resource.html"></iframe><script src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/sitepoint.min.js.download" id="properSP" defer=""></script><link href="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/css(1)" rel="stylesheet">
<style type="text/css">
	#sp-modal {
    font-family: "Roboto","Helvetica Neue","Helvetica",Helvetica,Arial,sans-serif;
  	-webkit-font-smoothing: antialiased;
		height: 100%;
		left: 0;
    opacity: 1;
		position: fixed;
    text-rendering: optimizeLegibility;
		top: 0;
		transition: opacity .5s ease-in-out;
		width: 100%;
		z-index: 1000;
  }
	#sp-modal.hidden {
		opacity: 0;
		transition: opacity .5s ease-in-out;
  }
	#sp-modal .sp-modal_overlay {
		background: rgba(0,0,0,0.65);
		height: 100%;
		left: 0;
		position: absolute;
		top: 0;
		width: 100%;
		z-index: 1100;
  }
	#sp-modal .sp-modal_content {
    background: #414141;
  	box-shadow: 0 0 10px rgba(0,0,0,0.4);
    box-sizing: border-box;
  	color: #fff;
    left: 50%;
		min-width: 645px;
		max-width: 700px;
    padding: 1.875em;
    position: absolute;
    top: 50%;
    transform: translate(-50%, -50%);
		z-index: 1110;
  }
	#sp-modal .sp-modal_content h2 {
		font-size: 1.95313rem;
    margin: 0 auto;
    line-height: 1.5;
    text-align: center;
    color: white;
	}
	#sp-modal .sp-modal_content h3 {
		font-size: 1.5rem;
    margin: 0 auto 30px;
    font-weight: normal;
    line-height: 1.5;
    text-align: center;
    color: white;
	}
	#sp-modal .sp-modal_content #sp-book {
		display: flex;
    justify-content: space-between;
	}
	#sp-modal .sp-modal_content #sp-book .sp-book_cover {
  	max-width: 180px;
  	width: 100%;
	}
	#sp-modal .sp-modal_content #sp-book .sp-book_info {
    padding: 0 0 0 32px;
	}
	#sp-modal .sp-modal_content #sp-book .sp-book_gif {
		max-height: 225px;
	}
	#sp-modal .sp-modal_content form {
		display: flex;
		flex-direction: row;
    margin: 32px 0 0;
	}
	#sp-modal .sp-modal_content form input {
    background-color: #fff;
    font-family: inherit;
    border: 1px solid #dcdcdc;
    box-shadow: inset 0 0 0 rgba(0,0,0,0.1);
    color: #262626;
    display: block;
    font-size: 1em;
    margin: 0 8px 0 0;
    padding: .75em;
    height: 3.0625em;
    width: 100%;
    box-sizing: border-box;
    transition: all .15s linear;
	}
	#sp-modal .sp-modal_content form input[name="name"] {
    max-width: 230px;
	}
	#sp-modal .sp-modal_content form button {
    background: #3ec9cb;
    border: 1px solid;
    border-color: #3ec9cb;
    border-radius: 2px;
    color: white;
    cursor: pointer;
    display: inline-block;
    font-size: 1rem;
    font-weight: bold;
  	height: 3.0625em;
    line-height: 1.5;
    margin: 0;
    min-width: 100px;
    padding: 0.5rem;
    position: relative;
    text-decoration: none;
    text-transform: capitalize;
    transition: 0.3s ease;
    transition-property: border-color, background-color, color;
	}
  #sp-modal .sp-modal_content form button:hover {
    background-color: #24b3b5;
    border-color: #24b3b5;
	}
	.sp-close-modal {
    background: none;
    border: none;
  	color: #fff !important;
    cursor: pointer;
    font-size: 16px;
		font-weight: 600;
    opacity: 0.6;
    position: absolute;
    right: 10px;
    top: 10px;
    transition: opacity 0.3s ease;
		margin: 0;
		padding: 0px;
  }
	.sp-close-modal:hover {
		opacity: 1;
  }
	.sp-close-modal:focus {
    outline: none;
	}
  .sp-recaptcha {
    margin: 20px 0 0;
    font-size: 12px;
  }
  .sp-recaptcha.hide {
    display: none;
    visibility: hidden;
  }
  .sp-recaptcha a {
    color: #3ec9cb;
  }
</style>


<div id="sp-modal" class="hidden" style="display: none;">
	<div class="sp-modal_overlay"></div>
	<div class="sp-modal_content">
		<h2 class="sp-modal_heading">Free Interactive Javascript Book!</h2>
		<h3 class="sp-modal_subheading">Worth $11.95 on Amazon. Yours Free!</h3>
    <div id="sp-book" data-gtm-vis-recent-on-screen-9559795_113="10161" data-gtm-vis-first-on-screen-9559795_113="10161" data-gtm-vis-total-visible-time-9559795_113="100" data-gtm-vis-has-fired-9559795_113="1">
      <img class="sp-book_cover" src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/1572326964jsbp.png">
			<div class="sp-book_info">
        <img class="sp-book_gif" src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/1581469079shor_js.gif">
	     </div>
    </div>
    <form name="free-book-form" id="free-book-form" action="https://www.sitepoint.com/premium/register-user">
			<input type="hidden" name="campaign" value="js-best-practice-reader">
      <input type="text" name="name" placeholder="Name" required="">
      <input type="email" name="email" placeholder="Enter your Email" required="">
      <button type="submit">Go</button>
    </form>
    <div class="sp-recaptcha hide">
      This site is protected by reCAPTCHA and the Google
      <a href="https://policies.google.com/privacy">Privacy Policy</a> and
      <a href="https://policies.google.com/terms">Terms of Service</a> apply.
    </div>
	  <button title="close" class="sp-close-modal"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 22.6 22.6" style="height: 1em; width: 1em;" xml:space="preserve" preserveAspectRatio="none"><rect fill="currentColor" x="8.3" y="-1.7" transform="matrix(0.7071 0.7071 -0.7071 0.7071 11.3137 -4.6863)" width="6" height="26"></rect><rect fill="currentColor" x="8.3" y="-1.7" transform="matrix(-0.7071 0.7071 -0.7071 -0.7071 27.3137 11.3137)" width="6" height="26"></rect></svg></button>
	</div>
</div>
<script type="text/javascript" id="">var spModal=document.querySelector("#sp-modal"),paragraph=document.createElement("p"),bookParagraph="",modalMeta={delay:1E4,heading:"Free Interactive Javascript Book!",subHeading:"Worth $11.95 on Amazon. Yours Free!",bookSlug:"js-best-practice-reader",bookCover:"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2019/10/1572326964jsbp.png",bookGif:"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2020/02/1581469079shor_js.gif",timeout:7};
function attachModalListeners(a){a.querySelector(".sp-close-modal").addEventListener("click",toggleModal);a.querySelector(".sp-modal_overlay").addEventListener("click",toggleModal);a.querySelector(".sp-close-modal").addEventListener("keyup",function(a){27==a.keyCode&&toggleModal()})}
function detachModalListeners(a){a.querySelector(".sp-close-modal").removeEventListener("click",toggleModal);a.querySelector(".sp-modal_overlay").removeEventListener("click",toggleModal);a.querySelector(".sp-close-modal").removeEventListener("keyup",function(a){27==a.keyCode&&toggleModal()})}
function toggleModal(){var a=spModal.style.display;"none"===a?(spModal.style.display="block",window.setTimeout(function(){spModal.classList.remove("hidden")},150),attachModalListeners(spModal)):(spModal.classList.add("hidden"),window.setTimeout(function(){spModal.style.display="none"},150),detachModalListeners(spModal),addTimeout())}function addTimeout(){var a=new Date;a.setDate(a.getDate()+modalMeta.timeout);window.localStorage.setItem("sp-book-popup-closed",a)}
function checkTimeout(){var a=window.localStorage.getItem("sp-book-popup-closed"),b=(new Date(Date.parse(a))).getTime(),c=(new Date).getTime();return b<c||!a?!0:!1}
function grecaptchaSubmitHandler(a){a.preventDefault();var b=this;"undefined"!=typeof grecaptcha?grecaptcha.execute("6LfEw7cUAAAAABIV8YABIbOzqBJ3zr4BpjVbDXDK",{action:"free_book_popup"}).then(function(a){inputToken=document.createElement("input");inputToken.setAttribute("name","recaptcha_token");inputToken.setAttribute("value",a);inputToken.setAttribute("type","hidden");b.appendChild(inputToken);b.submit()}):b.submit()}
function checkRecaptcha(){"undefined"!=typeof grecaptcha&&(document.querySelector(".sp-recaptcha").classList.remove("hide"),document.querySelector("#free-book-form").addEventListener("submit",grecaptchaSubmitHandler))}
(function(){document.forms["free-book-form"].campaign.value=modalMeta.bookSlug;document.querySelector("#sp-modal .sp-modal_heading").innerHTML=modalMeta.heading;document.querySelector("#sp-modal .sp-modal_subheading").innerHTML=modalMeta.subHeading;document.querySelector("#sp-book .sp-book_cover").src=modalMeta.bookCover;document.querySelector("#sp-book .sp-book_gif").src=modalMeta.bookGif;document.querySelector("#sp-modal .sp-close-modal").innerHTML='\x3csvg xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink" version\x3d"1.1" id\x3d"Layer_1" x\x3d"0px" y\x3d"0px" viewBox\x3d"0 0 22.6 22.6" style\x3d"height: 1em; width: 1em;" xml:space\x3d"preserve" preserveAspectRatio\x3d"none"\x3e\x3crect fill\x3d"currentColor" x\x3d"8.3" y\x3d"-1.7" transform\x3d"matrix(0.7071 0.7071 -0.7071 0.7071 11.3137 -4.6863)" width\x3d"6" height\x3d"26"\x3e\x3c/rect\x3e\x3crect fill\x3d"currentColor" x\x3d"8.3" y\x3d"-1.7" transform\x3d"matrix(-0.7071 0.7071 -0.7071 -0.7071 27.3137 11.3137)" width\x3d"6" height\x3d"26"\x3e\x3c/rect\x3e\x3c/svg\x3e';
checkRecaptcha();window.setTimeout(function(){(800<window.innerHeight||768<window.innerWidth)&&checkTimeout()&&(toggleModal(),document.querySelector(".sp-close-modal").focus())},modalMeta.delay)})();</script>
<script type="text/javascript" id="">!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq("init","1991563104285178");fbq("set","agent","tmgoogletagmanager","1991563104285178");fbq("track","PageView");</script>
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=1991563104285178&amp;ev=PageView&amp;noscript=1"></noscript>
<script src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/adsct" type="text/javascript"></script><iframe name="_hjRemoteVarsFrame" title="_hjRemoteVarsFrame" id="_hjRemoteVarsFrame" src="./A Step by Step Guide to Building an Android Audio Player App — SitePoint_files/box-469cf41adb11dc78be68c1ae7f9457a4.html" style="display: none !important; width: 1px !important; height: 1px !important; opacity: 0 !important; pointer-events: none !important;"></iframe></body></html>